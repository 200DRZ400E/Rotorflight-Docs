{"searchDocs":[{"title":"Announcements","type":0,"sectionRef":"#","url":"/announcement/Announcements","content":"danger This snapshot is not suitable for end-users. It is intended for beta-testers. Please realise that this software is under heavy development and as such there may be bugs or unintended control issues. Please test with care If you wish to become involved in testing these snapshots please contact us on the Discord","keywords":"","version":null},{"title":"snapshot 2.0.0-20230912","type":0,"sectionRef":"#","url":"/announcement/snapshot 2.0.0-20230912","content":"Rotorflight snapshot 2.0.0-20230912 is ready NOTE! This snapshot is not suitable for end-users. It is intended for beta-testers. The Configurator is available to download here.The Blackbox is available to download here.The LUA scripts is available to download here. Please also read the Snapshots Wiki page for general information about snapshots. Changes to the Firmware: Governor gov_max_throttle parameter addedGovernor tracking_speed fixed in passthrough modeRPM filter fixed if only main rotor RPM availableRPM filter update fixed for lower CPU loadCyclic Cross-Coupling refactoredCollective-to-yaw precomp not used during spoolupTTA Collective correction refactoredTTA not used during spoolupH7 TIMUP configuration bug fixedBlackBox multi-file logging fixed (works on W25N01G too)BlackBox erase refactored - works also while loggingBoost and Offset terms added to BlackBoxPID Test Mode 3 added for HSI testingTail center trim scaling changedTail motor thrust law changed to linearMany new parameters added to MSPMany new parameters added to Adjustment Functions Changes to the Configurator: Chinese translation addedMSP aligned with the firmwarePID Test Mode 3 added to ProfilesBoost gains and cutoffs added to ProfilesOffset gains and limits added to ProfilesCyclic Cross-coupling compensation added to ProfilesGovernor max throttle added to ProfilesTail Center Trim added to Mixer Changes to the Blackbox: Fix a drag&amp;drop bugFix adjustment labelsFix RPM_FILTER debug mode labelsFix collective setpoint scalingChanges to the LUA Scripts: Aligned MSP messages with firmware 20230912 Added Boost cutoffs Added Offset gains Added Cyclic Cross-Coupling Added Governor Max Throttle","keywords":"","version":null},{"title":"2023-08-09-August Video","type":0,"sectionRef":"#","url":"/blog/2023/08/09/August Video","content":"Goblin 420 Raw Specter V2 with Rotorflight 2 Snapshot 20230602","keywords":"","version":null},{"title":"2023-08-23-August Video","type":0,"sectionRef":"#","url":"/blog/2023/08/23/August Video","content":"Rotorflight 2","keywords":"","version":null},{"title":"2023-09-19-September Video","type":0,"sectionRef":"#","url":"/blog/2023/09/19/September Video","content":"Smacking XLpower Nimbus 550 - Rotorflight 2 HARD Smacking XLpower Nimbus 550 - Rotorflight 2","keywords":"","version":null},{"title":"2023-09-21-September Video","type":0,"sectionRef":"#","url":"/blog/2023/09/21/September Video","content":"OMP M4 Morning Stick Bang - Rotorflight 2 HARD smack OMP M4 Rotorflight 2","keywords":"","version":null},{"title":"2023-09-26-September Video","type":0,"sectionRef":"#","url":"/blog/2023/09/26/September Video","content":"Getting Used to Spector NME - Rotorflight 2 Spector NME Tuning Flight - Rotorflight 2","keywords":"","version":null},{"title":"2023-10-04-October Video","type":0,"sectionRef":"#","url":"/blog/2023/10/04/October Video","content":"Avant Mostro 700 - Rotorflight 2 - Mike Wilson","keywords":"","version":null},{"title":"2023-10-14-October Video","type":0,"sectionRef":"#","url":"/blog/2023/10/14/October Video","content":"Tingyang Meng Flying RF on Spector NME - AMOS","keywords":"","version":null},{"title":"Adding a Blog Post","type":0,"sectionRef":"#","url":"/docs/Developers/Adding-a-Blog","content":"Adding a Blog Post To make a new Blog post open the Blog Directory. Click on one of the previous posts to use as a template then chose download. Make the changes you wish using a text editor. Click on the Blog folder and Add File. Upload your new blog file.","keywords":"","version":"Next"},{"title":"What is Rotorflight?","type":0,"sectionRef":"#","url":"/docs/Developers/Developers-Information","content":"","keywords":"","version":"Next"},{"title":"What's next?​","type":1,"pageTitle":"What is Rotorflight?","url":"/docs/Developers/Developers-Information#whats-next","content":"","version":"Next","tagName":"h2"},{"title":"Editing the Website","type":0,"sectionRef":"#","url":"/docs/Developers/Editing-the-Website","content":"","keywords":"","version":"Next"},{"title":"Online Editing​","type":1,"pageTitle":"Editing the Website","url":"/docs/Developers/Editing-the-Website#online-editing","content":"This is probably the easiest and most straightforward way to make changes. At the bottom of each page there is an Edit this page button. Click on this link to take you to the project folder on Github.  In the top righthand corner of the page click on Edit  You can now edit the Markdown file as required. When complete click on the Commit Changes Button on the top Right corner of the page.  ","version":"Next","tagName":"h2"},{"title":"Adding pictures​","type":1,"pageTitle":"Editing the Website","url":"/docs/Developers/Editing-the-Website#adding-pictures","content":"To add an immage to your page open the img folder that is located in the same directory as your page. Chose Add file and upload. info Please do not use Capitals* or Underscore (_) in the image names.  ","version":"Next","tagName":"h2"},{"title":"Adding a new page​","type":1,"pageTitle":"Editing the Website","url":"/docs/Developers/Editing-the-Website#adding-a-new-page","content":"Download one of the current pages. Open the Markdown (.MD) file in an Editor. At the top of the file change the Sidebar_Position to position your new page where you wish it to be in the sidebar. The current pages are numbered with a spacing of 10 so there are free spaces for new pages between each. Once complete add File and upload the new page. ","version":"Next","tagName":"h2"},{"title":"Flow charts/Diagrams","type":0,"sectionRef":"#","url":"/docs/Developers/Flow-Charts","content":"Flow charts/Diagrams Using charts, flow diagrams etcMermaid Maybe we can use this somewhere.","keywords":"","version":"Next"},{"title":"Developers Intro","type":0,"sectionRef":"#","url":"/docs/Developers/intro","content":"Developers Intro","keywords":"","version":"Next"},{"title":"Modeling Cross Coupling","type":0,"sectionRef":"#","url":"/docs/Developers/Modeling-Cross-Coupling","content":"","keywords":"","version":"Next"},{"title":"The problem​","type":1,"pageTitle":"Modeling Cross Coupling","url":"/docs/Developers/Modeling-Cross-Coupling#the-problem","content":"When the helicopter experience high disturbance in the pitch axis, it would wobble to the roll axis. Similarly, when the helicopter experience disturbance in the roll axis, it would transfer to the pitch axis, but to a lesser degree.  (Thanks to Jonas for the picture) ","version":"Next","tagName":"h2"},{"title":"To explain the coupling​","type":1,"pageTitle":"Modeling Cross Coupling","url":"/docs/Developers/Modeling-Cross-Coupling#to-explain-the-coupling","content":"","version":"Next","tagName":"h2"},{"title":"Theory 1​","type":1,"pageTitle":"Modeling Cross Coupling","url":"/docs/Developers/Modeling-Cross-Coupling#theory-1","content":"It might be due to the fact that the rotor and motors are spinning disks. Due to gyroscopic precession, there must be some coupling between pitch and roll axis. (Not true, perfect spinning disks does not have coupling) Instead, if theory 3 dominates, conventional motor would provide the same motion. However, direct drive motor would actually counter the tilting motion. ","version":"Next","tagName":"h3"},{"title":"Theory 2​","type":1,"pageTitle":"Modeling Cross Coupling","url":"/docs/Developers/Modeling-Cross-Coupling#theory-2","content":"The transient coupling is likely due to the change of phase lag of the main rotor during sudden change of roll/pitch rate. At high acceleration, the blades flex and introduce a much smaller phase lag (&lt;90 degrees). ","version":"Next","tagName":"h3"},{"title":"Theory 3​","type":1,"pageTitle":"Modeling Cross Coupling","url":"/docs/Developers/Modeling-Cross-Coupling#theory-3","content":"The rotor and body can be modeled as a rigid spinning disk and a body coupled by a spring and a damper. When commanded to pitch forward, the disk tilts forward first and the body stays the same attitude. Since there is a difference in angles, the spring loads up, giving the body a torque in positive pitch. However, by Newton's third law, the disk would &quot;feel&quot; a positive pitch force, which turns 90 degree and gives a torque on the roll axis.  ","version":"Next","tagName":"h3"},{"title":"To explain the different magnitudes​","type":1,"pageTitle":"Modeling Cross Coupling","url":"/docs/Developers/Modeling-Cross-Coupling#to-explain-the-different-magnitudes","content":"","version":"Next","tagName":"h2"},{"title":"Theory 1​","type":1,"pageTitle":"Modeling Cross Coupling","url":"/docs/Developers/Modeling-Cross-Coupling#theory-1-1","content":"There is a large difference in inertia between pitch and roll axis. ","version":"Next","tagName":"h3"},{"title":"Theory 2​","type":1,"pageTitle":"Modeling Cross Coupling","url":"/docs/Developers/Modeling-Cross-Coupling#theory-2-1","content":"Tennis Racket theorem. The pitch axis is the second principal axis which is unstable. ","version":"Next","tagName":"h3"},{"title":"Proposed controller design​","type":1,"pageTitle":"Modeling Cross Coupling","url":"/docs/Developers/Modeling-Cross-Coupling#proposed-controller-design","content":"","version":"Next","tagName":"h2"},{"title":"Theory 3​","type":1,"pageTitle":"Modeling Cross Coupling","url":"/docs/Developers/Modeling-Cross-Coupling#theory-3-1","content":"If theory 3 is the main contributor of the coupling effect, one simple idea is to make the disk rolling forward at all time. To know that the disk has a force on it, we need to take derivative of the gyro signal (i.e. D-term) and add that to the roll axis. There is no need for this on the Roll-to-pitch since there is not much coupling. ","version":"Next","tagName":"h3"},{"title":"What is Rotorflight?","type":0,"sectionRef":"#","url":"/docs/DIY-corner/Quickstart 1","content":"","keywords":"","version":"Next"},{"title":"What's next?​","type":1,"pageTitle":"What is Rotorflight?","url":"/docs/DIY-corner/Quickstart 1#whats-next","content":"","version":"Next","tagName":"h2"},{"title":"Introduction","type":0,"sectionRef":"#","url":"/docs/intro","content":"","keywords":"","version":"Next"},{"title":"Latest Rotorflight 2 Version​","type":1,"pageTitle":"Introduction","url":"/docs/intro#latest-rotorflight-2-version","content":"The Rotorflight 2 Snapshots for testing can be found on the Announcements page. Please join the Rotorflight Discord discussion to ask questions and get assistance from the links at the bottom of this page.  ","version":"Next","tagName":"h2"},{"title":"Design Requirements","type":0,"sectionRef":"#","url":"/docs/Manufacturers/Design-Requirements","content":"","keywords":"","version":"Next"},{"title":"General​","type":1,"pageTitle":"Design Requirements","url":"/docs/Manufacturers/Design-Requirements#general","content":"Rotorflight is based on Betaflight, and thus has the same basic requirements for the hardware. Please read the Design Guidelines for Betaflightfirst. ","version":"Next","tagName":"h2"},{"title":"Features​","type":1,"pageTitle":"Design Requirements","url":"/docs/Manufacturers/Design-Requirements#features","content":"The following features and peripherals are mandatory: Gyroscope &amp; AccelerometerBarometerBlackbox (flash chip or SD card)Indicator LEDs (Power, GPIO)DFU buttonUSB socketRegulated +5V for external devices (RPM sensor, GPS, Compass, LED strips, etc.)Voltage sensor (ADC) for Vx and +5V Optional peripherals and features: Voltage sensor (ADC) for main battery (Vbat) ","version":"Next","tagName":"h2"},{"title":"Gyroscope & Accelerometer​","type":1,"pageTitle":"Design Requirements","url":"/docs/Manufacturers/Design-Requirements#gyroscope--accelerometer","content":"The supported gyro&amp;acc chips are: BMI270ICM42688PICM20689 (supported but poor performance)ICM20602 (supported but poor performance) Other models are not supported. ","version":"Next","tagName":"h3"},{"title":"Barometer​","type":1,"pageTitle":"Design Requirements","url":"/docs/Manufacturers/Design-Requirements#barometer","content":"The supported barometer chips are: SPL06DPS310BMP280 (supported but poor performance)BMP388 (supported but poor performance) Other barometer models - like BMP390 - will be supported in the future. ","version":"Next","tagName":"h3"},{"title":"Blackbox Flash​","type":1,"pageTitle":"Design Requirements","url":"/docs/Manufacturers/Design-Requirements#blackbox-flash","content":"The minimum suggested flash size for the Blackbox is 1Gbit (128Mb x 8). The supported SPI flash chips are: Winbond W25N01GWinbond W25Q64 (supported but not large enough for RF use)Winbond W25Q128 (supported but not large enough for RF use)Winbond W25Q256 (supported but not large enough for RF use) Larger flash chips - like W25N02 and W25N04 - will be supported in the future. ","version":"Next","tagName":"h3"},{"title":"Connectors​","type":1,"pageTitle":"Design Requirements","url":"/docs/Manufacturers/Design-Requirements#connectors","content":"A helicopter Flight Controller typically have two kinds of connectors. The servo and motors are connected to standard 0.1&quot; pin headers, with 6V-8.4V power on the center pin. The power is usually provided by a BEC in the ESC. The other connectors are usually UARTs or multi-function connectors, with 5V power. Most commonly these are JST type connectors (XH,PA,GH,etc). It is also very useful to have the motor/servo headers on one end of the FC, and the other connectors on the other. This helps to remember that the other side has BEC (&gt;6V) voltage, and the other side has 5V. The standard &quot;JR&quot; style servo plugs are thicker than 0.1&quot;, usually 2.65mm. If more than 4 headers are located side by side, an extra gap of 0.5mm is required after every 4x3 header block. Otherwise the servo plugs will not fit in properly. ","version":"Next","tagName":"h2"},{"title":"Servo and Motor Outputs​","type":1,"pageTitle":"Design Requirements","url":"/docs/Manufacturers/Design-Requirements#servo-and-motor-outputs","content":"","version":"Next","tagName":"h2"},{"title":"Cyclic Servos​","type":1,"pageTitle":"Design Requirements","url":"/docs/Manufacturers/Design-Requirements#cyclic-servos","content":"Three servos are required for cyclic. The reference designs also have a pin for an optional fourth cyclic servo, which can be a solder pad on the PCB. The servo pins should be selected so that they are on the same timer. DMA is not required for servos, but the pins should have it available for future use. The servo header is a standard 0.1&quot; pin header. It's common to have the cyclic servos side-by-side, as a 3x3 header block. ","version":"Next","tagName":"h3"},{"title":"Tail servo / ESC​","type":1,"pageTitle":"Design Requirements","url":"/docs/Manufacturers/Design-Requirements#tail-servo--esc","content":"The tail servo pin should be selected so that it is on a different timer than the cyclic servos. For ESC/motor use, DMA must also be available without conflicts. The pin and timer selection must allow DShot BitBang. ","version":"Next","tagName":"h3"},{"title":"Main ESC​","type":1,"pageTitle":"Design Requirements","url":"/docs/Manufacturers/Design-Requirements#main-esc","content":"Main ESC/motor pin should be selected so that it is on a different timer than the tail motor/servo. The pin must have DMA available without conflicts. The pin and timer selection must allow DShot BitBang. ","version":"Next","tagName":"h3"},{"title":"ESC telemetry / RPM​","type":1,"pageTitle":"Design Requirements","url":"/docs/Manufacturers/Design-Requirements#esc-telemetry--rpm","content":"The ESC telemetry pin can be an Rx on any UART. If a combined ESC telemetry and RPM input pin is preferred, then the pin should be selected so that it can act as a UART Rx, and a timer input, for example PA1 or PA3. The RPM input requires a free timer. The timer can't be shared with other functions. TIM2 and TIM5 can accommodate 4 RPM inputs, one on each channel. Other timers can accommodate only one RPM input. It is preferred to use TIM2 or TIM5 for RPM inputs. The RPM inputs require over-voltage protection diodes. Any pin header that provides the servo power (VX) and can act as an RPM input, must have the protection diode on the signal pin. This is due to a shortcoming in a commonly used HobbyWing RPM sensor. ","version":"Next","tagName":"h3"},{"title":"Extension Ports​","type":1,"pageTitle":"Design Requirements","url":"/docs/Manufacturers/Design-Requirements#extension-ports","content":"The extension ports are for any extra peripherals, including receivers. The ports are primarily for UARTs, but because of the STM32 flexibility, they can be configured for other functions too. Possible functions are: UARTI2CRPM inputLED stripExtra PWM (servo) outputExtra DShot (motor) outputCamera ControlVoltage and current measurements (ADC)RSSI inputExternal OSDVideo Tx Control (VTX) The physical connector should be 4-pin JST-GH [GND, 5V, RX, TX], or other JST style polarised connector. ","version":"Next","tagName":"h2"},{"title":"UARTs​","type":1,"pageTitle":"Design Requirements","url":"/docs/Manufacturers/Design-Requirements#uarts","content":"It is preferable to have as many UARTs available as possible. ","version":"Next","tagName":"h3"},{"title":"Receiver​","type":1,"pageTitle":"Design Requirements","url":"/docs/Manufacturers/Design-Requirements#receiver","content":"Typically, any of the UART connectors can be used for connecting the receiver. If a dedicated receiver port is preferred, UART3/4 on PC10/PC11 is the best choice due to its flexibility. DSM​ Spektrum DSM can't be connected to a UART socket, as it requires 3.3V. The DSM socket is a JST-ZH with [3.3V GND DATA] pins. The options for connecting a DSM receiver are: Provide a standard DSM socketConnect to a generic UART socket with 3.3V power (instead of 5V)Connect to a generic UART socket with an adapter, converting 5V to 3.3V ","version":"Next","tagName":"h3"},{"title":"Compass​","type":1,"pageTitle":"Design Requirements","url":"/docs/Manufacturers/Design-Requirements#compass","content":"An external compass connects to an I2C interface, which can be provided by one of the multi-function headers (UART/I2C/...) Usually a compass is integrated into an external GPS unit. Note! The external I2C can't be shared with the internal barometer, as this would not allow using that pin header for anything else than I2C. ","version":"Next","tagName":"h3"},{"title":"GPS​","type":1,"pageTitle":"Design Requirements","url":"/docs/Manufacturers/Design-Requirements#gps","content":"An external GPS connects to any of the UART (multi-function) headers. If a GPS specific header is preferred, a 6-pin socket with [GND,SDA,SCL,TX,RX,5V] can be added (Pixhawk compatible). ","version":"Next","tagName":"h3"},{"title":"LED STRIP​","type":1,"pageTitle":"Design Requirements","url":"/docs/Manufacturers/Design-Requirements#led-strip","content":"The WS2812B LED strip requires a GPIO pin with a timer and DMA capability. It can be provided on one of the multi-function header (shared with UART etc.) ","version":"Next","tagName":"h3"},{"title":"Other Features​","type":1,"pageTitle":"Design Requirements","url":"/docs/Manufacturers/Design-Requirements#other-features","content":"","version":"Next","tagName":"h2"},{"title":"LEDs​","type":1,"pageTitle":"Design Requirements","url":"/docs/Manufacturers/Design-Requirements#leds","content":"At least one power LED and one indicator LED (GPIO) are mandatory. Preferably, a two colour (green+red) indicator LED on two GPIO pins can be used. ","version":"Next","tagName":"h3"},{"title":"Boot/DFU button​","type":1,"pageTitle":"Design Requirements","url":"/docs/Manufacturers/Design-Requirements#bootdfu-button","content":"There must be a bootloader DFU button on the PCB, accessible without opening the FC case. ","version":"Next","tagName":"h3"},{"title":"SWD​","type":1,"pageTitle":"Design Requirements","url":"/docs/Manufacturers/Design-Requirements#swd","content":"The SWD pins PA13 and PA14 must be exposed on test pads on the PCB, along with the GND and +3.3V pads. ","version":"Next","tagName":"h3"},{"title":"Power​","type":1,"pageTitle":"Design Requirements","url":"/docs/Manufacturers/Design-Requirements#power","content":"","version":"Next","tagName":"h2"},{"title":"5V​","type":1,"pageTitle":"Design Requirements","url":"/docs/Manufacturers/Design-Requirements#5v","content":"A 5V power must be provided for the external devices. The regulator should be able to provide at last 1A current, preferably 2A. ","version":"Next","tagName":"h3"},{"title":"VX (BEC power)​","type":1,"pageTitle":"Design Requirements","url":"/docs/Manufacturers/Design-Requirements#vx-bec-power","content":"The system is powered from the VX Power bus, which can be provided by a BEC or a 2S LiPo battery. The VX power is fed into the FC via the ESC pin headers (Throttle, Telem, RPM). Large ESCs usually have two or three pairs of BEC power wires, for increasing the current capacity. The FC should have input pins for all of them. For very large helicopters, it may be reasonable to have a separate connector (XT30) for the VX power input. ","version":"Next","tagName":"h3"},{"title":"ESD Protection​","type":1,"pageTitle":"Design Requirements","url":"/docs/Manufacturers/Design-Requirements#esd-protection","content":"The STM32 GPIO pins are NOT protected for over-voltage (details in ST Application Notes). Thus, any pins exposed on external connectors should be protected by TVS diodes and current limiting resistors. The signal pins on the sockets with servo power (Vx) should have 470ohm resistors. The signal pins on the expansion sockets with +5V power should have 22ohm resistors. The higher resistance (470ohm) on the servo/ESC pins provides protection against accidental polarity reversal (unplugging the ESC/BEC plug wrong way around). The lower resistance (22ohm) on the expansion sockets is required for the various protocols used. It is still offering some over-current protection, while not interfering with the signals. The easiest way to implement the protection is to use an ESD protection IC with integrated steering and TVS diodes:  Or using discrete components:  ","version":"Next","tagName":"h2"},{"title":"Miscellaneous Notes​","type":1,"pageTitle":"Design Requirements","url":"/docs/Manufacturers/Design-Requirements#miscellaneous-notes","content":"","version":"Next","tagName":"h2"},{"title":"TIM1 and TIM8​","type":1,"pageTitle":"Design Requirements","url":"/docs/Manufacturers/Design-Requirements#tim1-and-tim8","content":"DShot BitBang requires one &quot;pacing&quot; timer, either TIM1 or TIM8. In the design, one of them must be reserved for BitBang use. One &quot;pacing&quot; timer channel and one DMA channel is required for each GPIO port (PA,PB,PC,PD) with motor pins. It is preferred to have all motor pins located on the same GPIO port, thus using only one timer and DMA channel. ","version":"Next","tagName":"h3"},{"title":"Manufacturers stuff?","type":0,"sectionRef":"#","url":"/docs/Manufacturers/Developers","content":"","keywords":"","version":"Next"},{"title":"What's next?​","type":1,"pageTitle":"Manufacturers stuff?","url":"/docs/Manufacturers/Developers#whats-next","content":"","version":"Next","tagName":"h2"},{"title":"Manufacturers Intro","type":0,"sectionRef":"#","url":"/docs/Manufacturers/intro","content":"Manufacturers Intro","keywords":"","version":"Next"},{"title":"Cyclic Cross Coupling","type":0,"sectionRef":"#","url":"/docs/Tuning/Cyclic-Cross-Coupling","content":"","keywords":"","version":"Next"},{"title":"What is it?​","type":1,"pageTitle":"Cyclic Cross Coupling","url":"/docs/Tuning/Cyclic-Cross-Coupling#what-is-it","content":"During ticktocks, one might observe that the center of the main rotor rotates during stops. Another scenario is during hover, one can shake the elevator stick and observe a tilt in the roll axis and a significant drift in the yaw axis. These are both the symptoms of uncompensated cyclic cross coupling. Cyclic cross coupling happens mainly due to the pitch axis inputs. When the pitch command is given, due to the high moment of inertia of the helicopter in the pitch axis, the frame would &quot;lag&quot; behind the rotor disks. This difference in position creates a torque on the rotor blade and thus transfer to the roll axis due to gyroscopic precession. The cross coupling compensation simply take a derivative on the pitch SETPOINT and add it proportionally to the roll axis. This effectively pre-load the roll axis with a input command so that when the above scenario happens, the two effects cancel each other. ","version":"Next","tagName":"h2"},{"title":"How to tune it?​","type":1,"pageTitle":"Cyclic Cross Coupling","url":"/docs/Tuning/Cyclic-Cross-Coupling#how-to-tune-it","content":"Start with a low value and increase when theres no significant coupling is observed or when there is a dimishing return. You might also want to try piroflips because cross-coupling gain changes the corresponding commands at different orientations during piroflips. Try increase the gain slowly so you can get used to the feeling. From experience, the harder the main rotor dampener is, the lower cross coupling gain is required. ","version":"Next","tagName":"h2"},{"title":"(Advanced Topic) Constant Cross Coupling​","type":1,"pageTitle":"Cyclic Cross Coupling","url":"/docs/Tuning/Cyclic-Cross-Coupling#advanced-topic-constant-cross-coupling","content":"The above cross coupling only happens at the moment of pitch (could also be a little bit of roll) input. However, there could be another scenario that a constant cross-coupling might occur. If the main blade flap axis is not centered at the middle commonly due to very hard dampeners, very low headspeed, or rotorhead designs, a constant cross coupling might occur because the phase lag of the rotor blade is no longer perfectly $90^{\\circ}$. In this case, you might want to consider adjusting the phase angle in the Mixer page. Usually a +2 to +10 deg would be a good range to start and more testing is needed. You might also want to make sure that it is doing the right thing. For CW rotor, when pushing the elevator, the swash should tilt slightly right, and when you pull the elevator stick, the swash should tilt slightly left. ","version":"Next","tagName":"h2"},{"title":"First Flight & Filter Tuning","type":0,"sectionRef":"#","url":"/docs/Tuning/First-Flight-Filter-Tuning","content":"","keywords":"","version":"Next"},{"title":"Example: A Relatively Well Tuned Filter During 3D Maneuvers​","type":1,"pageTitle":"First Flight & Filter Tuning","url":"/docs/Tuning/First-Flight-Filter-Tuning#example-a-relatively-well-tuned-filter-during-3d-maneuvers","content":"","version":"Next","tagName":"h2"},{"title":"RAW Gyro:​","type":1,"pageTitle":"First Flight & Filter Tuning","url":"/docs/Tuning/First-Flight-Filter-Tuning#raw-gyro","content":" ","version":"Next","tagName":"h3"},{"title":"Filtered Gyro:​","type":1,"pageTitle":"First Flight & Filter Tuning","url":"/docs/Tuning/First-Flight-Filter-Tuning#filtered-gyro","content":" ","version":"Next","tagName":"h3"},{"title":"Reference Design","type":0,"sectionRef":"#","url":"/docs/Manufacturers/Reference-Design","content":"","keywords":"","version":"Next"},{"title":"Variants​","type":1,"pageTitle":"Reference Design","url":"/docs/Manufacturers/Reference-Design#variants","content":"The design F7Ax has a few variants, depending on the chosen port combination. Variant\tServos\tMotors\tTELE\tSBUS\tDSM\tPort A\tPort B\tPort C\tPort D\tPort E\tPort F\tPort GF7A1\t✔\t✔\t✔\t✔\t✓\t✔ ᴿˣ\t✓\t✓\t✓\t✓ F7A2\t✔\t✔\t✔\t✔\t✓\t✔ ᴿˣ ✓\t✓\t✓\t✔ F7A3\t✔\t✔\t✔\t✔\t✓ ✓\t✓\t✓\t✓\t✔ ᴿˣ F7A4\t✔\t✔\t✔\t✔\t✓ ✓\t✓\t✔ ᴿˣ\t✔ Legend: ✔ = Mandatory Port, ✓ = Optional Port, ᴿˣ = Primary port for a serial receiver ","version":"Next","tagName":"h2"},{"title":"Ports​","type":1,"pageTitle":"Reference Design","url":"/docs/Manufacturers/Reference-Design#ports","content":"","version":"Next","tagName":"h2"},{"title":"Servo and Motor Port​","type":1,"pageTitle":"Reference Design","url":"/docs/Manufacturers/Reference-Design#servo-and-motor-port","content":"The servos and motors are connected to standard 0.1&quot; pin headers. The pin headers are organised as two blocks, of size 4x3 and 3x3 pins. The cyclic servos and the tail servo/ESC connect to the 4x3 block. The main ESC connects to the 3x3 block. A receiver can be connected to the 3x3 block in some configurations. All pin headers in these blocks have a common GND and a common VX (BEC power). Label\tPin1\tPin2\tPin3\tMCU PinS1\tGND\tVX\tPWM\tPB4 S2\tGND\tVX\tPWM\tPB5 S3\tGND\tVX\tPWM\tPB0 TAIL\tGND\tVX\tPWM\tPB3 ESC\tGND\tVX\tSIG\tPB6 RPM\tGND\tVX\tSIG\tPA2 SBUS\tGND\tVX\tSIG\tPA3 The ESC pin headers are designed to accommodate all variations of traditional and drone ESCs. The following combinations are possible: Type\tESC Header\tRPM Header\tSBUS Header\tExample ESCLarge heli ESC\tPWM + BEC\tRPM + BEC\tTelem + BEC\tHobbywing Platinum V4 120A Small heli ESC\tPWM + BEC\tRPM + BEC\tS.BUS⁶\tHobbywing Platinum V3 50A BLHeli32 ESC\tDShot\tBEC.\tTelemetry\tIFlight BLITZ E80 BLHeli-S ESC\tDShot\tBEC\tS.BUS⁶\tHolybro 20A A one-wire receiver can be connected to the SBUS header, if the ESC Telemetry feature is not in use. The receiver must be high voltage capable, e.g. up to 8.4V. ","version":"Next","tagName":"h3"},{"title":"Extended Servo and Motor Port​","type":1,"pageTitle":"Reference Design","url":"/docs/Manufacturers/Reference-Design#extended-servo-and-motor-port","content":"In case four cyclic servos are required, the following pinout with two 4x3 blocks can be used. Label\tPin1\tPin2\tPin3\tMCU PinS1\tGND\tVX\tPWM\tPB4 S2\tGND\tVX\tPWM\tPB5 S3\tGND\tVX\tPWM\tPB0 S4\tGND\tVX\tPWM\tPB1 TAIL\tGND\tVX\tPWM\tPB3 ESC\tGND\tVX\tSIG\tPB6 RPM\tGND\tVX\tSIG\tPA2 SBUS\tGND\tVX\tSIG\tPA3 ","version":"Next","tagName":"h3"},{"title":"Expansion Port A​","type":1,"pageTitle":"Reference Design","url":"/docs/Manufacturers/Reference-Design#expansion-port-a","content":"Port A is primarily a UART port. It shall be labelled with Ⓐ. The connector type is 4-pin JST-GH, with the following pinout: Pin1\tPin2\tPin3\tPin4TX\tRX\t5V\tGND The signal pins are connected to PA0 (TX) and PA1 (RX) on UART4. Port A can be also used as an RPM input port for two RPM signals, or two voltage inputs for the ADC. ","version":"Next","tagName":"h3"},{"title":"Expansion Port B​","type":1,"pageTitle":"Reference Design","url":"/docs/Manufacturers/Reference-Design#expansion-port-b","content":"Port B is primarily a UART port. It shall be labelled with Ⓑ. The connector type is 4-pin JST-GH, with the following pinout: Pin1\tPin2\tPin3\tPin4TX\tRX\t5V\tGND The signal pins are connected to PC6 (TX) and PC7 (RX) on UART6. Port B can be also used for Camera Control, or for LED Strip. ","version":"Next","tagName":"h3"},{"title":"Expansion Port C​","type":1,"pageTitle":"Reference Design","url":"/docs/Manufacturers/Reference-Design#expansion-port-c","content":"Port C is a UART port or an I2C port. It shall be labelled with Ⓒ. The connector type is 4-pin JST-GH, with the following pinout: Pin1\tPin2\tPin3\tPin4TX/SCL\tRX/SDA\t5V\tGND The signal pins are connected to PB10 (TX) and PB11 (RX) on UART3. ","version":"Next","tagName":"h3"},{"title":"Expansion Port D​","type":1,"pageTitle":"Reference Design","url":"/docs/Manufacturers/Reference-Design#expansion-port-d","content":"Port D is primarily a UART port. It shall be labelled with Ⓓ. The connector type is 4-pin JST-GH, with the following pinout: Pin1\tPin2\tPin3\tPin4TX\tRX\t5V\tGND The signal pins are connected to PA9 (TX) and PA10 (RX) on UART1. Port D can be also used for Camera Control or LED Strip. ","version":"Next","tagName":"h3"},{"title":"Expansion Port E​","type":1,"pageTitle":"Reference Design","url":"/docs/Manufacturers/Reference-Design#expansion-port-e","content":"Port E is a UART port. It shall be labelled with Ⓔ. The connector type is 4-pin JST-GH, with the following pinout: Pin1\tPin2\tPin3\tPin4TX\tRX\t5V\tGND The signal pins are connected to PC12 (TX) and PD2 (RX) on UART5. ","version":"Next","tagName":"h3"},{"title":"Expansion Port F​","type":1,"pageTitle":"Reference Design","url":"/docs/Manufacturers/Reference-Design#expansion-port-f","content":"Port F is a UART port. It shall be labelled with Ⓕ. The connector type is 4-pin JST-GH, with the following pinout: Pin1\tPin2\tPin3\tPin4TX\tRX\t5V\tGND The signal pins are connected to PC10 (TX) and PC11 (RX) on UART3/4. ","version":"Next","tagName":"h3"},{"title":"Expansion Port G​","type":1,"pageTitle":"Reference Design","url":"/docs/Manufacturers/Reference-Design#expansion-port-g","content":"Port G is primarily for a UART/GPS and a I2C/Compass. It shall be labelled with Ⓖ. The connector type is 6-pin JST-GH, with the following pinout: Pin1\tPin2\tPin3\tPin4\tPin5\tPin65V\tTX\tRX\tSCL\tSDA\tGND This socket is Pixhawk GPS compatible. The signal pins are connected to PB10 (SCL), PB11 (SDA) on I2C2; and PC6 (TX), PC7 (RX) on UART6. Port G is an alternative to Ports B and C. Either Port G can be implemented, or Ports B and C - but not both. ","version":"Next","tagName":"h3"},{"title":"DSM Port​","type":1,"pageTitle":"Reference Design","url":"/docs/Manufacturers/Reference-Design#dsm-port","content":"The DSM Port is a dedicated port for connecting a Spektrum DSM satellite. The connector type is 3-pin JST-ZH, with the following pinout: Pin1\tPin2\tPin33.3V\tGND\tSIG The signal pin is connected to PA10 on UART1. The DSM Port is sharing the RX pin with Port D. It is possible to implement either DSM Port, or Port D - or both. ","version":"Next","tagName":"h3"},{"title":"MCU Resource Allocation​","type":1,"pageTitle":"Reference Design","url":"/docs/Manufacturers/Reference-Design#mcu-resource-allocation","content":"Function\tPIN\tALT1\tALT2\tALT3\tALT4\tNotesServo1\tPB4\tT3Ch1 Servo2\tPB5\tT3Ch2 Servo3\tPB0\tT3Ch3 Servo4\tPB1\tT3Ch4 Optional: Fourth cyclic servo¹ Rudder\tPB3\tT2Ch2 Tail servo or motor Motor1\tPB6\tT4Ch1 Main motor Motor2\tPB7\tT4Ch2 Optional: Second motor¹ UART1 Tx\tPA9\tTX1\tT1Ch2⁹ Optional: UART, LED strip, CC UART1 Rx\tPA10\tRX1\tT1Ch3⁹ Optional: UART, LED strip, CC UART2 Tx\tPA2\tTX2\tT5Ch3\tT9Ch1\tA2\tESC Telem, RPM, CPPM, ADC, LED strip⁵ UART2 Rx\tPA3\tRX2\tT5Ch4\tT9Ch2\tA3\tESC Telem, RPM, CPPM, ADC, LED strip⁵ UART3 Tx\tPC10\tTX3\tTX4 UART3 Rx\tPC11\tRX3\tRX4 UART4 Tx\tPA0\tTX4\tT5Ch1\tA0 UART4 Rx\tPA1\tRX4\tT5Ch2\tA1 UART5 Tx\tPC12\tTX5 UART5 Rx\tPD2\tRX5 UART6 Tx\tPC6\tTX6\tT8Ch1⁹ Optional: UART, LED strip, CC, GPS UART6 Rx\tPC7\tRX6\tT8Ch2⁹ Optional: UART, LED strip, CC, GPS SCL1\tPB8\tSCL1 Internal baro SDA1\tPB9\tSDA1 Internal baro SCL2\tPB10\tSCL2\tTX3\tT2Ch3 Optional: External compass, UART3, PWM SDA2\tPB11\tSDA2\tRX3\tT2Ch4 Optional: External compass, UART3, PWM NSS\tPA4\tNSS1 Gyro SPI NSS SCK\tPA5\tSCK1 Gyro SPI SCK MISO\tPA6\tMISO1 Gyro SPI MISO MOSI\tPA7\tMOSI1 Gyro SPI MOSI GEXT\tPA15\tEXTI Gyro INT NSS\tPB12\tNSS2 Flash SPI NSS SCK\tPB13\tSCK2 Flash SPI SCK MISO\tPB14\tMISO2 Flash SPI MISO MOSI\tPB15\tMOSI2 Flash SPI MOSI ADC1\tPC0\tA10 Optional: Vbat voltage sensor⁷ ADC2\tPC1\tA11 Vx voltage sensor⁷ ADC3\tPC2\tA12 5V voltage sensor⁷ ADC4\tPC3\tA13 Optional: extra ADC input ADC5\tPC4\tA14 Optional: extra ADC input LED STRIP\tPA8\tT1Ch1⁹ Optional: Dedicated LED strip BEEPER\tPC13\tGPIO Optional: buzzer LED1\tPC14\tGPIO Green status LED³ LED2\tPC15\tGPIO Red status LED³ USB DM\tPA11\tDM USB data- USB DP\tPA12\tDP USB data+ SWDIO\tPA13\tSWDIO Debugger test pad⁴ SWCLK\tPA14\tSWCLK Debugger test pad⁴ Free¹⁰\tPB2 Free¹⁰\tPC8 Free¹⁰\tPC9  ¹ The optional motors and servos should have solder pads on the PCB. ² PC10/PC11 can be configured as UART3 or UART4, or a combination of RX3/TX4, allowing S.BUS and S.Port on the same socket. ³ A dual colour LED is preferred. ⁴ For easy debugging, GND,3V3,SWDIO,SWCLK solder pads should be available on the PCB. ⁵ PA2/PA3 is used for a combined ESC telemetry / RPM / Receiver pin header block. ⁶ A receiver can be connected if ESC telemetry is not used. PA2 and PA3 also support CPPM receivers. ⁷ A voltage divider and a filter cap is needed on each ADC input. The cutoff frequency for the input filter should be ~ 25Hz. ⁸ Not used ⁹ TIM1 can be used only if TIM8 is unused; and vice versa. ¹⁰ If space permits, all unused/free pins should have solder pads on the PCB. ","version":"Next","tagName":"h2"},{"title":"Motorised Tail and TTA","type":0,"sectionRef":"#","url":"/docs/Tuning/Motorised-Tail-and-TTA","content":"Motorised Tail and TTA info Torque Tail Assist (TTA) - This is a feature used for helicopters with motorised tails. A motorised tail can provide high control authority in one direction. In the other it is greatly reduced as the motor can only turn in one direction. TTA is ised to add control authority in the other direction. It does this by rapidly accelerating the main motor. This acceleration provides torque in the oposite direction to the tail motor. The following section will","keywords":"","version":"Next"},{"title":"Rescue mode settings","type":0,"sectionRef":"#","url":"/docs/Tuning/Rescue-mode-settings","content":"Rescue mode settings","keywords":"","version":"Next"},{"title":"High Speed Integral","type":0,"sectionRef":"#","url":"/docs/Tuning/High-Speed-Integral","content":"","keywords":"","version":"Next"},{"title":"What is it?​","type":1,"pageTitle":"High Speed Integral","url":"/docs/Tuning/High-Speed-Integral#what-is-it","content":"This is one of the core features of most advanced FBL systems (Vbar, CGY760R, Spirit .etc) The problem it is solving is maiinly due to the difference in lift from high airspeed in the x and y directions. For example, as the helicoper is moving forward while having a constant positive collective pitch, the helicopter tends to pull up. If the collective pitch is negaive, the imbalance of life is reversed, and the heli would tend to push down. This is usually not a problem if the collective stays constant because the integral gain will compensate this constant &quot;trim&quot;. However, when changing collective while moving at a high speed (for example, fast moving side tick tocks) the heli would not move axially. It would behave in a snake shape because the I term is constantly charging and discharging in the opposite direction. The High Speed Integral (HSI) resembles another integral term. However, its output is proportional to the collecive input, which reverses when the collective is negative. This is the &quot;arching&quot; effect you might see on FBLs like a vbar, where if one tilt the helicotper at high collective, and move the collective up and down, the swash plate would resemble one side of a seesaw. ","version":"Next","tagName":"h2"},{"title":"How to tune it?​","type":1,"pageTitle":"High Speed Integral","url":"/docs/Tuning/High-Speed-Integral#how-to-tune-it","content":"To properly tune the HSI, one has to be able to fly maneuvers comfortably at a relatively high speed. The best maneuver is the fast moving ticktocks. It is advised to start low (about 30) and see if theres snaking at the first few tick tocks. The higher O-gain you use, the faster it reacts to high speed, meaning the amount of time ticktock becomes axial is lowered. Ideally, the O-gain should be just high enough to havo no snaking. Too high might result in bobbling during stationary tick tocks because it is essentially an I gain at constant collective. ","version":"Next","tagName":"h2"},{"title":"(Advanced Topic) Tick tock Optimization​","type":1,"pageTitle":"High Speed Integral","url":"/docs/Tuning/High-Speed-Integral#advanced-topic-tick-tock-optimization","content":"The problem of naively implementing the HSI is repeated maneuvers like tick tocks. The HSI works the best when the heli needs reversed &quot;trim&quot; when collective is reversed. However, there is another scenario that this could happen: during ticktocks. Assume there's some error that reverses at each stops of the ticktocks, then the HSI would tend to charge up little by little at each end, resuling unwanted bobbling right after each collective change. Currently, there seems to be three ways to solve this problem. The simplest way is to not deal with the problem at all and use a very fast I-term decay on the normal integral gain to &quot;soothe&quot; the effect. However, the fast I-term decay creates significant drifting problem in other scenarios, making the heli less predictable. A much more sophisicated way to deal with this issue. From behavior of the pilots, we know that when the cyclic inputs are high, theres a very low chance that the heli would keep the same airspeed at the input direction. Therefore, the HSI would be added to the normal I term (in the input direction) at some cyclic threshold. This preserves the HSI in the orthogonal direction but &quot;deletes&quot; them in the parallel direction. RF2 follows the previous logic. However, instead of &quot;deleting&quot; the HSI, it &quot;decays&quot; HSI in a set speed (dictated by the offset_bleed_rate_curve and offset_bleed_limit_curve parameter) into the normal-I. Therefore, a extremely fast impulse on the stick would not result in a complete deletion of the HSI. ","version":"Next","tagName":"h2"},{"title":"(Advanced Topic) HSI Charging Rate​","type":1,"pageTitle":"High Speed Integral","url":"/docs/Tuning/High-Speed-Integral#advanced-topic-hsi-charging-rate","content":"Another problem with HSI is that it behaves like integral gain at constant collective with higher collective having a higher &quot;equivalent I-gain.&quot; This problem could affect the PID balance greatly especially at high collectives. One way to solve this problem is to lower the HSI charging rate at high collective (offset_charge_curve). It effectly lowers the equivalent I-gain at high collective which helps maintain the PID balance. However, the adverse effect is that this assumes no significant airspeed change when collective is high, which in some extreme cases might not be true. Also, snaking migh occur if one prefer to use high collective during fast moving ticktocks. Therefore, it is advised to have the charge rate as high as possible at high collective to minimize the effect. ","version":"Next","tagName":"h2"},{"title":"Tune Feedforward","type":0,"sectionRef":"#","url":"/docs/Tuning/Tune-Feedforward","content":"","keywords":"","version":"Next"},{"title":"Steps​","type":1,"pageTitle":"Tune Feedforward","url":"/docs/Tuning/Tune-Feedforward#steps","content":"If it is the first time, make sure to start low (usually &lt;=100 on the cyclic and 0 on the tail)Do continuous flips, rolls, or pirouetting.Stop the flip/roll or piro, observe the stopping behaviorIf the heli does not stop cleanly and kept moving a little bit, increase the FF gain on its corresponding axisIf the heli stops but bounces back, decrease the FF gain on the corresponding axis IMPORTANT NOTICE: This parameter is NOT designed to tune the response of the helicopter. DO NOT use it to change how fast the heli reacts to inputs. If you want a sharper reaction, please increase the B(oost)-gain ","version":"Next","tagName":"h2"},{"title":"Tune Cyclic","type":0,"sectionRef":"#","url":"/docs/Tuning/Tune-Cyclic","content":"","keywords":"","version":"Next"},{"title":"General Guidelines​","type":1,"pageTitle":"Tune Cyclic","url":"/docs/Tuning/Tune-Cyclic#general-guidelines","content":"The higher the gains are, the better the heli response to inputs, the more &quot;locked in&quot; heli feels.The pitch axis is the most difficult axis to tune. It is advised to start here.The roll ais is the easiest. Many different gains works on the roll axis. It is advised to tune last.D-gain dampens oscillations caused by P, P-gain dampens oscillations caused by I.I-oscillation are very slow (0.5-1Hz) while P and D oscillations are fast (5-8Hz).If there is I-oscillation, one could lower the I-gain or raise the P-gain.The best maneuver to see I-oscillation is to pirouetting long pitch pumps. If the heli does not stop clean and has a large shake, it is eighter I gain being too high or P-gain being too low.It is possible to use the same I-gain on pitch and roll axis.Check tick-tock stops to see if P and D are too high by observing the fast oscillations. If oscillations are mainly slow, I-gain might be too high.The B-gain should be increased incrementally to fit how sharp the response you want. Usually only pitch needs a significant B-gain.Too high on B-gain results in unwanted oscillations at stops if low B-gain did not cause it.One could also experiment the I-relax to tune out the I-oscillations at stops. Lower number means stronger relax. ","version":"Next","tagName":"h2"},{"title":"Tune the Governor","type":0,"sectionRef":"#","url":"/docs/Tuning/Tune-Governor","content":"","keywords":"","version":"Next"},{"title":"Preparation​","type":1,"pageTitle":"Tune the Governor","url":"/docs/Tuning/Tune-Governor#preparation","content":"If you're using TTA, disable it by setting TTA gain to 0 on the Profiles tab. You can enable it again once you're done tuning the governor.Set Blackbox debug mode to Governor and Blackbox logging rate to 1kHz on the Blackbox tab.Start with governor P-gain and I-gain really low, e.g. 10 for P and 20 for I. Spool up might now take a bit longer. ","version":"Next","tagName":"h2"},{"title":"Tuning steps​","type":1,"pageTitle":"Tune the Governor","url":"/docs/Tuning/Tune-Governor#tuning-steps","content":"When you're using the Rotorflight Lua scripts, you can change all gain values on the field. My routine is to make logs of 3 or 4 different values around the default value for one specific gain. Example: the governor F-gain has a default value of 15, so try 10, 15, 20 and 25. Start with 10, do some pitch pumps (give it full collective for a short period of time) and disarm. Change the value to 15 and save, arm, do some pitch pumps, and so on. The result will be one log file with 4 partial logs, which you can select with the dropdown in the upper-right corner of the Blackbox Explorer. Then look in the Blackbox Explorer to see what gain value works best. If you think you might need higher or lower values for a specific gain, make a new log with adjusted values. Try increments of 10 for the F-gain, increments of 25 for the I-gain and increments of 10 for the P-gain. ","version":"Next","tagName":"h2"},{"title":"1. Tune the F-gain​","type":1,"pageTitle":"Tune the Governor","url":"/docs/Tuning/Tune-Governor#1-tune-the-f-gain","content":"The F-gain determines the feedforward term, together with cyclic and collective precompensation. As stated, the better the F-gain is tuned, the less the PID-loop has to correct. Here's an example where the F-gain is too low, since the headspeed drops quite a bit when doing pitch pumps.  If the F-gain is too high, the headspeed will be temporarily too high.  ","version":"Next","tagName":"h3"},{"title":"2. Tune I-gain​","type":1,"pageTitle":"Tune the Governor","url":"/docs/Tuning/Tune-Governor#2-tune-i-gain","content":"After you have found and set the best value for F-gain you can increase the I-gain until it starts playing up, then reduce it with 1/3. Here you can see an I-gain value which is too high, since there are some slow oscillations during and/or after the pitch pump.  ","version":"Next","tagName":"h3"},{"title":"3. Tune P-gain​","type":1,"pageTitle":"Tune the Governor","url":"/docs/Tuning/Tune-Governor#3-tune-p-gain","content":"After setting the optimal value for I-gain start increasing the P-gain till there are slight oscillations, then reduce it with 1/3. Here is an example of a P-gain that is clearly too high and introduces fast oscillations.  ","version":"Next","tagName":"h3"},{"title":"4. Tune D-gain​","type":1,"pageTitle":"Tune the Governor","url":"/docs/Tuning/Tune-Governor#4-tune-d-gain","content":"Unless you're flying a 500+ heli you probably won't need D, since there's hardly any momentum in the rotor. ","version":"Next","tagName":"h3"},{"title":"The result​","type":1,"pageTitle":"Tune the Governor","url":"/docs/Tuning/Tune-Governor#the-result","content":"This is the result of tuning a Scorpion HKII-2208 3600KV motor in a Gaui X2.  And these are the gain values found for this heli:  ","version":"Next","tagName":"h2"},{"title":"Tune the Tail","type":0,"sectionRef":"#","url":"/docs/Tuning/Tune-the-Tail","content":"","keywords":"","version":"Next"},{"title":"What's next?​","type":1,"pageTitle":"Tune the Tail","url":"/docs/Tuning/Tune-the-Tail#whats-next","content":"","version":"Next","tagName":"h2"},{"title":"Converting from RF1 to RF2","type":0,"sectionRef":"#","url":"/docs/Tutorial-Quickstart/Converting-from-RF1-to-RF2","content":"","keywords":"","version":"Next"},{"title":"Back Up hardware resources.​","type":1,"pageTitle":"Converting from RF1 to RF2","url":"/docs/Tutorial-Quickstart/Converting-from-RF1-to-RF2#back-up-hardware-resources","content":"There have been a huge number of changes between versions of Rotorflight. The old RF1 backup/dump file is not compatible with the new RF2 version. Ultimately this means all of the tuning and configuration has to be done again starting from the Rotorflight 2 defaults. If you have already done custom remapping these can be transferred by using the dump hardware command in CLI and saving the output to a file.  ","version":"Next","tagName":"h2"},{"title":"Tuning Guide for 0602 version controller (Gyro D)","type":0,"sectionRef":"#","url":"/docs/Tuning/Tuning-description","content":"","keywords":"","version":"Next"},{"title":"How should I start tuning?​","type":1,"pageTitle":"Tuning Guide for 0602 version controller (Gyro D)","url":"/docs/Tuning/Tuning-description#how-should-i-start-tuning","content":"The default value of the PIDF control loop is very conservative. You may notice that the helicopter is difficult to fly because the controller is not doing much. After confirming that the filters have cleaned up the gyro readout, the first step is simply increase the P and I gain on all three axis until they hold their position relatively well. The P value usually range from 20 to 60 and the I value usually range from 120 to 300.  ","version":"Next","tagName":"h2"},{"title":"Roll tuning​","type":1,"pageTitle":"Tuning Guide for 0602 version controller (Gyro D)","url":"/docs/Tuning/Tuning-description#roll-tuning","content":"Tune the roll axis first. Increase the P gain until roll feels solid at stops. Increase I gain until the helicopter stop significant drifting during long pitch pumps. You would find that the drift may never go away. Therefore, the I gain should be around when diminishing return begins.Finally, tune the Feed Forward (FF) gain using continuous rolls. Lower the FF gain until there I windup occurs when stopping after a few continuous flips at max rate, then dial the FF gain back to when it just disappear.Usually the roll axis does not require a lot of D-gain because the relatively low inertia. Add D gain if the helicopter oscillates at aileron hard stops. ","version":"Next","tagName":"h2"},{"title":"Pitch tuning​","type":1,"pageTitle":"Tuning Guide for 0602 version controller (Gyro D)","url":"/docs/Tuning/Tuning-description#pitch-tuning","content":"The pitch axis is usually more difficult to tune due to the inherently high inertia and underdamping. This results I-term oscillation during stops and high disturbance (rainbow / tick-tock stops). The main solution to this problem is the D-gain. However, D-gain is very sensitive to noise, therefore it is advised to find the upper limit of D gain first before adjusting other parameters. Increase D-gain until the helicopter just start to fast oscillate like a dog shaking water which usually happens around 600-700 with good filters. Then dial-back by around 30%. This D gain would be the limiter of other gains on pitch axis. Next, Increase P gain until a relatively good response time. Increase I gain until the helicopter stops significant drifting during long pitch pumps. It is very likely that after this procedure, you will see large but slow oscillations at hard stops. If the oscillation is fast, tune down the P gain. To fix the slow oscillation, it is time to use a new parameter: I-relax. DECREASE I-relax on pitch until there is little oscillation during stops.Finally, Tune the FF gain by watching the stop after continuous flips. Tune to a value that the I-windup just disappears. ","version":"Next","tagName":"h2"},{"title":"Yaw tuning​","type":1,"pageTitle":"Tuning Guide for 0602 version controller (Gyro D)","url":"/docs/Tuning/Tuning-description#yaw-tuning","content":"The yaw tuning is relatively simple. First try to find the maximum P gain on the tail by increasing until fast oscillation and dial back by roughly 20%. Then increase I gain so that it holds position well when hovering, and maintains a good constant rotation speed. D-gain and FF-gain are usually set to zero on tail. Next, tune the CW and CCW stop gains. Too high may results oscillation during stops, too low may result wandering or slow bounce back during stops. Then, tune the collective feedforward gain by watching the tail during climb up and fast pitch pumps. The helicopter should not rotate CW (tail goes left) right after pitch pump, and it should maintain a relatively good position during climb ups (there might be a little CCW after it starts climbing and slow bounce back at the end, this is normal) Finally, decrease the cyclic feedforward if CW initial motion is observed when applying cyclic stick inputs, and increase if CCW initial motion is observed. ","version":"Next","tagName":"h2"},{"title":"Rates smoothness​","type":1,"pageTitle":"Tuning Guide for 0602 version controller (Gyro D)","url":"/docs/Tuning/Tuning-description#rates-smoothness","content":"During piroflips, one may feel that the cyclic has slight wobbles. Increasing rates_smoothness in CLI would help with that given the PID loop is tuned well. ","version":"Next","tagName":"h2"},{"title":"Other notes​","type":1,"pageTitle":"Tuning Guide for 0602 version controller (Gyro D)","url":"/docs/Tuning/Tuning-description#other-notes","content":"The best tuning one could achieve in this version should be stable on the cyclic during stationary flips with a little tail wag. The cyclic should give confidence as it will very accurately follow the command, making flying very low easier. It could have some wobbles at stops of pirouetting pitch pumps. It also could have large wobbles during tick-tock stops. If you feel that the helicopter is &quot;flighting you&quot; or &quot;doesn't want to move&quot; on the cyclic input during tail-down tick-tocks, increase I gain on pitch. ","version":"Next","tagName":"h2"},{"title":"Introduction","type":0,"sectionRef":"#","url":"/docs/Tutorial-Quickstart/Introduction","content":"","keywords":"","version":"Next"},{"title":"Latest Rotorflight 2 Version​","type":1,"pageTitle":"Introduction","url":"/docs/Tutorial-Quickstart/Introduction#latest-rotorflight-2-version","content":"The Rotorflight 2 Snapshots for testing can be found on the Announcements page. Please join the Rotorflight Discord discussion to ask questions and get assistance from the links at the bottom of this page.  ","version":"Next","tagName":"h2"},{"title":"What board should I get?","type":0,"sectionRef":"#","url":"/docs/Tutorial-Quickstart/What-Board","content":"","keywords":"","version":"Next"},{"title":"Processors​","type":1,"pageTitle":"What board should I get?","url":"/docs/Tutorial-Quickstart/What-Board#processors","content":"We recommend use of a board that has an H743, F7 (F745, F722 etc) or F405 processor for best results. An F411 can (and has) been used but may not be able to run all of the newer features. The newest H7 processors are yet to be supported/fully tested. Please avoid these (or help us with the testing!!) ","version":"Next","tagName":"h2"},{"title":"Gyros​","type":1,"pageTitle":"What board should I get?","url":"/docs/Tutorial-Quickstart/What-Board#gyros","content":"Rotorflight 2.xx is built on the Betaflight 4.3 platform. This is several releases behind the current Betaflight version so as a result there may be some new hardware additions that are not yet supported. Currently the gyros on all common boards designed for Betaflight are supported. These include: MPU6000, MPU6050, MPU6500BMI270ICM42688 ","version":"Next","tagName":"h2"},{"title":"Size​","type":1,"pageTitle":"What board should I get?","url":"/docs/Tutorial-Quickstart/What-Board#size","content":"How large is the space available for the flight controller? The amount of space may affect the size of boards you choose to use. Standard sizes are 16mmx16mm, 20mmx20mm, 25.5mm.25.5mm (whoop), 30.5mmx30.5mm. There are also AIO (All in one) boards which contain the flight controller and 4x ESC's on the one board. ","version":"Next","tagName":"h2"},{"title":"How many pads are available?​","type":1,"pageTitle":"What board should I get?","url":"/docs/Tutorial-Quickstart/What-Board#how-many-pads-are-available","content":"We need to have pads available on the board to connect to our devices such as Servos, Motors, Frequency input, External logger, Receiver etc (GPS in the future). Receiver: This will require a UART RX and TX if we want to use telemetry (this will be documented by the manufacturer) Servos, Motor, Frequency: These items can be allocated to any free UART RX, UART TX, SDA, SCL, LED or Motor pad. Logger: An OpenLarger requires on free UART RX You will need to choose a board that has enough pins to enable all of your connections. ","version":"Next","tagName":"h2"},{"title":"Backup and restore","type":0,"sectionRef":"#","url":"/docs/Tutorial-Setup/Backup-and-restore","content":"","keywords":"","version":"Next"},{"title":"Back up the configuration​","type":1,"pageTitle":"Backup and restore","url":"/docs/Tutorial-Setup/Backup-and-restore#back-up-the-configuration","content":"Backups of your Rotorflight configuration can be taken in order to restore a controller to a previous state, in the event of a failure, or to duplicate your controller to use on another helicopter. Also it is advised that a backup is taken of the original Betaflight pre-loaded configuration before loading Rotorflight. ","version":"Next","tagName":"h2"},{"title":"Step 1.​","type":1,"pageTitle":"Backup and restore","url":"/docs/Tutorial-Setup/Backup-and-restore#step-1","content":" Open Rotorflight Configurator and [Connect]. If the board is new and as supplied with Betaflight a warning message will pop up saying the &quot;firmware version is not supported&quot;. This means that the board currently does not have Rotorflight loaded so it can be safely ignored. Rotorflight configurator will now open in CLI mode. If you are backing up your config after having already configured your helicopter you will need to click on the CLI tab from the left hand side of the page to open the CLI interface. ","version":"Next","tagName":"h3"},{"title":"Step 2.​","type":1,"pageTitle":"Backup and restore","url":"/docs/Tutorial-Setup/Backup-and-restore#step-2","content":"Choose what you want to back up. There are several options. dumpThis command dumps all of the hardware and software configuration. diffdiff will download any configuration that is not equal to the custom defaults for that board. Things like your ESC protocol, RX type etc. This file is very small. dump allDump all downloads all hardware and software the same as the dump command; however, it also includes all rate profiles. dump hardwareDump hardware will download all of the hardware config. This is information like the pin assignments and board specific information (gyro bus address etc).  ","version":"Next","tagName":"h3"},{"title":"Step 3.​","type":1,"pageTitle":"Backup and restore","url":"/docs/Tutorial-Setup/Backup-and-restore#step-3","content":" Click on [Clear output window]. Type the backup command (from step 2) in the window and click [ENTER].  ","version":"Next","tagName":"h3"},{"title":"Step 4.​","type":1,"pageTitle":"Backup and restore","url":"/docs/Tutorial-Setup/Backup-and-restore#step-4","content":" After the command is complete click [Save to File] and store on your computer. ","version":"Next","tagName":"h3"},{"title":"Load/Restore Config​","type":1,"pageTitle":"Backup and restore","url":"/docs/Tutorial-Setup/Backup-and-restore#loadrestore-config","content":"Use this process to load remapping config files for your specific flight controller if available. You can also restore config files to your flight controller you have previously saved or have been shared by other users. There is an Examples repository (Please note this needs more work) which has dump and diff files for a variety of helicopters. These can be used to configure a large portion of your FC. If there is not a config file suitable for your helicopter please ask at the Discord discussion and we may be able to help. ","version":"Next","tagName":"h2"},{"title":"Step 1.​","type":1,"pageTitle":"Backup and restore","url":"/docs/Tutorial-Setup/Backup-and-restore#step-1-1","content":" Open the CLI tab and click [Load from File] and select the file on your computer. Click on the [Execute] from the pop up. ","version":"Next","tagName":"h3"},{"title":"Step 2.​","type":1,"pageTitle":"Backup and restore","url":"/docs/Tutorial-Setup/Backup-and-restore#step-2-1","content":" Once the backup is loaded type save in the command line and [ENTER]. The flight controller will now reboot. ","version":"Next","tagName":"h3"},{"title":"Blackbox logging","type":0,"sectionRef":"#","url":"/docs/Tutorial-Setup/Blackbox","content":"","keywords":"","version":"Next"},{"title":"What is Blackbox​","type":1,"pageTitle":"Blackbox logging","url":"/docs/Tutorial-Setup/Blackbox#what-is-blackbox","content":"Blackbox is a flight data recording feature in Rotorflight. A Blackbox log contains a lot of data, such as the attitude of the heli, gyro sensor measurements, PID data, RC commands, motor outputs etc. It’s an extremely powerful tool for tuning and troubleshooting the heli. ","version":"Next","tagName":"h2"},{"title":"what are the blackbox logging devices?​","type":1,"pageTitle":"Blackbox logging","url":"/docs/Tutorial-Setup/Blackbox#what-are-the-blackbox-logging-devices","content":"","version":"Next","tagName":"h2"},{"title":"Blackbox data can be logged to:​","type":1,"pageTitle":"Blackbox logging","url":"/docs/Tutorial-Setup/Blackbox#blackbox-data-can-be-logged-to","content":"An SD card on the FC. This is probably the best way to log: it's fast and storage is only limited by the capacity of the SD card.A flash chip on the FC. Logging is fast, but storage is limited and copying log files can be slow.Or to an external logging device: OpenLog or OpenLager. Both devices use a micro SD card. OpenLog is slow, OpenLager is a lot faster. A flash chip or an SD card on the FC are nice, but if your FC doesn't have that you can connect an OpenLog or OpenLager logging device. ","version":"Next","tagName":"h3"},{"title":"Connecting OpenLog or OpenLager​","type":1,"pageTitle":"Blackbox logging","url":"/docs/Tutorial-Setup/Blackbox#connecting-openlog-or-openlager","content":"OpenLog and OpenLager can be connected to the FC using just three wires: +5V, ground and a TX output pad from a free UART on the FC, which is connected to the RX pad of the logging device. As soon as you power the device on, it will create a new log file on the SD card. Then it'll log everything it receives to that file. Simple but effective. For maximum performance the SD card should be formatted with the SD Association's special formatting tool. A fast SD card is needed, e.g. the Sandisk Extreme 16GB Class 10 UHS microSDHC. ","version":"Next","tagName":"h2"},{"title":"OpenLog​","type":1,"pageTitle":"Blackbox logging","url":"/docs/Tutorial-Setup/Blackbox#openlog","content":"OpenLog is a data logger developed by SparkFun. It can record up to 250kbps, but since it doesn't have a write buffer data can be lost. For better results the original SparkFun firmware should be replaced with Blackbox firmware. You need an FTDI cable/adapter to update the OpenLog board. There are also OpenLog clones for sale that are already equipped with Blackbox firmware. You can check your firmware by inspecting the Config.txt file on the SD card, a file that will be created if it doesn't already exist. If it just states the baud rate (e.g. a line with a number and then a line with the word baud), it's using the Blackbox firmware. The SparkFun firmware specifies more properties in Config.txt: baud, escape, esc#, mode, verb, echo, ignoreRX. ","version":"Next","tagName":"h2"},{"title":"OpenLager​","type":1,"pageTitle":"Blackbox logging","url":"/docs/Tutorial-Setup/Blackbox#openlager","content":"OpenLager is a Blackbox data logger developed by dRonin. It can log a lot faster (up to 2470kbps) and uses a write buffer. It's superior to OpenLog, and unless you're on a very tight budget there's no excuse not to use OpenLager. Some versions use an open/lock hinge mechanism instead of a 'push to eject' SD card socket, so you can't wrap it in heat shrink tube. You can fix that by carefully flattening the SD card retainer pin a little bit.  ","version":"Next","tagName":"h2"},{"title":"Configure Blackbox Logging​","type":1,"pageTitle":"Blackbox logging","url":"/docs/Tutorial-Setup/Blackbox#configure-blackbox-logging","content":"After you've connected OpenLog/OpenLager, you should configure your helicopter for logging in Rotorflight Configurator. Ensure that your TX output pad has been assigned a resource with resource SERIAL_TX (see Betaflight Unified Targets Repo).Specify which UART is connected to OpenLog/OpenLager. Go to the Serial Ports tab, then select Blackbox logging under Peripherals for the UART used for logging. For OpenLog, select a baudrate of 250kbps, for OpenLager select 2000kbps. Click Save and Reboot.Now you can assign a transmitter switch for logging under the Modes tab. Find the Blackbox mode and assign a range. You can choose a very broad range in order to log always. Click Save.Configure what to log in the Blackbox tab. Select Serial Port as your Blackbox logging device and a log rate of 500 Hz for OpenLog or 2 kHz for OpenLager. Under Blackbox debug mode you can specify what should be logged. There are a lot of choices, but you can select GYRO_SCALED for PID tuning, GOVERNOR for analyzing the governor or CYCLETIME if you're interested in CPU time. Click Save and Reboot.When logging mode is active and blackbox_mode is set to NORMAL, logging will start when you arm your helicopter. You can set blackbox_mode to ALWAYS for testing purposes, but be aware that you won't see log files unless the FC is rebooted (using LUA or the Configurator). The log files can be read with the Rotorflight Blackbox Explorer. ","version":"Next","tagName":"h2"},{"title":"Configuration","type":0,"sectionRef":"#","url":"/docs/Tutorial-Setup/Configuration","content":"","keywords":"","version":"Next"},{"title":"Personalization​","type":1,"pageTitle":"Configuration","url":"/docs/Tutorial-Setup/Configuration#personalization","content":"Allows you to set your heli name to be shown in the OSD, blackbox logs and diff/dump outputs.  ","version":"Next","tagName":"h2"},{"title":"System Configuration​","type":1,"pageTitle":"Configuration","url":"/docs/Tutorial-Setup/Configuration#system-configuration","content":"","version":"Next","tagName":"h2"},{"title":"PID Loop Frequency​","type":1,"pageTitle":"Configuration","url":"/docs/Tutorial-Setup/Configuration#pid-loop-frequency","content":"This is the frequency that the control loop operates at. Set to between 1kHz and 2kHz. There is limited or no benefit in higher rates and will result in high loads for your flight controller. This could be an issue for F405 and F411 boards. ","version":"Next","tagName":"h3"},{"title":"Accelerometer​","type":1,"pageTitle":"Configuration","url":"/docs/Tutorial-Setup/Configuration#accelerometer","content":"This must be selected if you wish to use stability (6G modes) such as Angle, Horizon or Rescue modes. ","version":"Next","tagName":"h3"},{"title":"Barometer​","type":1,"pageTitle":"Configuration","url":"/docs/Tutorial-Setup/Configuration#barometer","content":"This is used for Altitude hold Rescue which is currently still being developed ","version":"Next","tagName":"h3"},{"title":"Magnetometer​","type":1,"pageTitle":"Configuration","url":"/docs/Tutorial-Setup/Configuration#magnetometer","content":"Currently this does not provide any control functionality; however, can be used for telemetry.  ","version":"Next","tagName":"h3"},{"title":"Features​","type":1,"pageTitle":"Configuration","url":"/docs/Tutorial-Setup/Configuration#features","content":"This section is used to enable or disable features.  tip Features such as the Serial Rx, GPS, ESC Telemetry must be selected in the Serial ports section before selecting the Feature here. ","version":"Next","tagName":"h2"},{"title":"Serial Ports​","type":1,"pageTitle":"Configuration","url":"/docs/Tutorial-Setup/Configuration#serial-ports","content":"Please choose the functions you wish to assign to your UART.  ","version":"Next","tagName":"h2"},{"title":"MSP​","type":1,"pageTitle":"Configuration","url":"/docs/Tutorial-Setup/Configuration#msp","content":"As the name suggests, usually only used for lower-level communication using the MSP (MultiWii Serial Protocol) for configuration done by external devices, or to allow a more direct way of control. You can also set a specific baud rate caution This is not to be used as a &quot;toggle&quot; for the current UART when setting it (for example) for Serial RX. It's a relatively common mistake to make, and then cause your config to not save to prevent unwanted behavior when conflicting options are set ","version":"Next","tagName":"h3"},{"title":"GPS​","type":1,"pageTitle":"Configuration","url":"/docs/Tutorial-Setup/Configuration#gps","content":"GPS is not currently used for Rotorflight for any flight controls. This can be used for telemetry purposes. ","version":"Next","tagName":"h3"},{"title":"Serial Rx​","type":1,"pageTitle":"Configuration","url":"/docs/Tutorial-Setup/Configuration#serial-rx","content":"Check Receiver page for detailed info. ","version":"Next","tagName":"h3"},{"title":"ESC Telemetry​","type":1,"pageTitle":"Configuration","url":"/docs/Tutorial-Setup/Configuration#esc-telemetry","content":"Set a UART to ESC Telemetry if you wish to use the ESC_Sensor Feature. ","version":"Next","tagName":"h3"},{"title":"Blackbox Logging​","type":1,"pageTitle":"Configuration","url":"/docs/Tutorial-Setup/Configuration#blackbox-logging","content":"This enables a UART for external logging to an OpenLager. ","version":"Next","tagName":"h3"},{"title":"Telemetry: FrSky SmartPort​","type":1,"pageTitle":"Configuration","url":"/docs/Tutorial-Setup/Configuration#telemetry-frsky-smartport","content":"This is used when connecting an FrSky SmartPort receiver pin to this UART. ","version":"Next","tagName":"h3"},{"title":"Board and Sensor alignment​","type":1,"pageTitle":"Configuration","url":"/docs/Tutorial-Setup/Configuration#board-and-sensor-alignment","content":"Change the roll, pitch and yaw gyro alignment value until the model on the status page moves in the same direction as the gyro board. A method of determining what settings to use: set Roll, Pitch and Yaw values to 0 degrees. set Gyro alignment to CW-0 degrees. Move the FC around until the movement of the FC matches the movement of the helicopter on the &quot;Status&quot; page. You may have to &quot;reset Z axis&quot;. Now take note of how you have to rotate/flip the board in order to get the FC oriented in the way you wish to mount it in the helicopter. An example would be that you have to rotate the board 180 and flip. You would chose 'CW180 Flip' in the Gyro alignment dropdown.   ","version":"Next","tagName":"h2"},{"title":"Accelerometer Trim​","type":1,"pageTitle":"Configuration","url":"/docs/Tutorial-Setup/Configuration#accelerometer-trim","content":"This section is used to trim the roll and pitch axis while the helicopter is in Stability mode (e.g Angle, horizon or Rescue). The Transmitter trims for each cyclic axis must be at neutral when using Rotorflight (at 1500us). This will usually result in the helicopter drifting while in a stable hover. To correct for this drift the Accelerometer roll and pitch trims are to be used. This can be done either directly by the configurator or via the transmitter with Lua or Adjustments.  ","version":"Next","tagName":"h2"},{"title":"ESC Telemetry","type":0,"sectionRef":"#","url":"/docs/Tutorial-Setup/ESC-Telemetry","content":"","keywords":"","version":"Next"},{"title":"Select Serial Port​","type":1,"pageTitle":"ESC Telemetry","url":"/docs/Tutorial-Setup/ESC-Telemetry#select-serial-port","content":"The ESC telemetry pin TX needs to be connected to a spare UART RX. Select the UART from the Configuration page.  ","version":"Next","tagName":"h3"},{"title":"Enable the feature​","type":1,"pageTitle":"ESC Telemetry","url":"/docs/Tutorial-Setup/ESC-Telemetry#enable-the-feature","content":"Select ESC_SENSOR from the features to enable reading from the ESC. If you wish these values to be returned to the Tx you will also have to select the TELEMETRY and have a telemetry capable Receiver.  ","version":"Next","tagName":"h3"},{"title":"Half Duplex (to be updated)​","type":1,"pageTitle":"ESC Telemetry","url":"/docs/Tutorial-Setup/ESC-Telemetry#half-duplex-to-be-updated","content":"The Telemetry wire can be connected to the UART TX (as opposed to the RX) if the UART is set to half duplex. In most cases just leave this OFF. This still needs to be added to the configuration. Currently it is enabled through the CLI. set esc_sensor_halfduplex = ON ","version":"Next","tagName":"h3"},{"title":"Set the Protocol​","type":1,"pageTitle":"ESC Telemetry","url":"/docs/Tutorial-Setup/ESC-Telemetry#set-the-protocol","content":"This still needs to be added to the configuration. Currently it is enabled through the CLI. Please enter the protocol you wish to use from the following commands: set esc_sensor_protocol = NONE set esc_sensor_protocol = BLHELI32 set esc_sensor_protocol = HOBBYWINGV4 set esc_sensor_protocol = HOBBYWINGV5set esc_sensor_protocol = KONTRONIKset esc_sensor_protocol = SCORPION set esc_sensor_protocol = OMPHOBBY set esc_sensor_protocol = ZTW set esc_sensor_protocol = APD  For Hobbywing V4Additional parameters are provided for the voltage and current gains, and zero offsets. set esc_sensor_hw4_voltage_gain = 0 set esc_sensor_hw4_current_gain = 0 set esc_sensor_hw4_current_offset = 0  Setting these parameters to zero will enable the Auto-Calculation within the firmware. If you wish to fine tune the voltage and current you can use the below values as a starting point. Model\tVoltage gain\tCurrent gain\tCurrent offsetPlatinum LV 60A\t109\t0\t0 Platinum LV 80A\t109\t146\t409 Platinum LV 120A\t109\t110\t377 Platinum HV 130A\t210\t157\t0 Platinum HV 200A\t210\t157\t477 FlyFun HV 160A\t210\t66\t381 ","version":"Next","tagName":"h3"},{"title":"Power Config​","type":1,"pageTitle":"ESC Telemetry","url":"/docs/Tutorial-Setup/ESC-Telemetry#power-config","content":"Enable the Voltage and Current from the ESC Sensor  ","version":"Next","tagName":"h3"},{"title":"Flashing the firmware","type":0,"sectionRef":"#","url":"/docs/Tutorial-Setup/Flashing-the-firmware","content":"","keywords":"","version":"Next"},{"title":"Install Rotorflight Configurator​","type":1,"pageTitle":"Flashing the firmware","url":"/docs/Tutorial-Setup/Flashing-the-firmware#install-rotorflight-configurator","content":"Start by downloading and installing the latest Rotorflight Configurator release. This walk-through uses Windows, but it should also work on Linux or macOS. ","version":"Next","tagName":"h2"},{"title":"Install Drivers​","type":1,"pageTitle":"Flashing the firmware","url":"/docs/Tutorial-Setup/Flashing-the-firmware#install-drivers","content":"On Windows, install the STM USB Drivers from the links on the Rotorflight Configurator page. ","version":"Next","tagName":"h2"},{"title":"Back up Betaflight Config​","type":1,"pageTitle":"Flashing the firmware","url":"/docs/Tutorial-Setup/Flashing-the-firmware#back-up-betaflight-config","content":"Rotorflight is based on Betaflight and uses the Betaflight configuration as its base. You should make a copy of the configuration that the flight controller (FC) shipped with. Back up the Betaflight configuration as shown in Back up and restore. ","version":"Next","tagName":"h2"},{"title":"Flash Firmware to FC​","type":1,"pageTitle":"Flashing the firmware","url":"/docs/Tutorial-Setup/Flashing-the-firmware#flash-firmware-to-fc","content":"Connect the FC to your computer with an USB data cable. Now you are ready to install the Rotorflight firmware to your FC. There are five different versions of the firmware, each version targeting a specific microprocessor: F405, F411, F7X2, F745, and H743. Your FC must use one of those processors. Besides firmware, each FC has it's own configuration. The configuration specifies the FC board, e.g. what pads are used for what. ","version":"Next","tagName":"h2"},{"title":"Step 1.​","type":1,"pageTitle":"Flashing the firmware","url":"/docs/Tutorial-Setup/Flashing-the-firmware#step-1","content":"Identify the Betaflight target. This can be found in the dump file specified by board_name saved in your backup or on the manufacturers website.  ","version":"Next","tagName":"h3"},{"title":"Step 2.​","type":1,"pageTitle":"Flashing the firmware","url":"/docs/Tutorial-Setup/Flashing-the-firmware#step-2","content":"Open the Rotorflight configurator and click on [Update Firmware] Chose All release and Snapshots from the dropdown Select the Target you identified in Step 1. Select Full chip Erase. This will remove all previous configurations. Click on [Load firmware[online]]  ","version":"Next","tagName":"h3"},{"title":"Step 3.​","type":1,"pageTitle":"Flashing the firmware","url":"/docs/Tutorial-Setup/Flashing-the-firmware#step-3","content":"Check and confirm the target board is correct. Click on [Flash Firmware]  ","version":"Next","tagName":"h3"},{"title":"Step 4.​","type":1,"pageTitle":"Flashing the firmware","url":"/docs/Tutorial-Setup/Flashing-the-firmware#step-4","content":"When the programming is successful click on [Connect]. Click [Apply Custom Defaults] from the popup. The FC will now reboot.  ","version":"Next","tagName":"h3"},{"title":"Step 5.​","type":1,"pageTitle":"Flashing the firmware","url":"/docs/Tutorial-Setup/Flashing-the-firmware#step-5","content":"Configure the pin remapping. There are two options for this: If you have one of the boards listed in the Boards and Configuration Files section of the wiki (e.g. Matek F722 wpx) you can use a pre-configured custom defaults config file. These files have already had pins remapped for servos and motors. Choose a pin configuration (e.g. (a), (b) etc) that suits your helicopter best and either the Motorized Tail (MT) or Servo Tail (ST) as required. These files can be downloaded from the Rotorflight-targets repo. See the Custom Defaults page for more info. If this is your first Rotorflight controller or have no experience remapping pins then we recommend this method. If you have a different board and wish to use this method please ask on the Discord discussion and we can build one. The second option is to manually re-map your pins to add your servos and motors, or by using the Custom defaults remapping spreadsheet. ","version":"Next","tagName":"h3"},{"title":"Troubleshooting​","type":1,"pageTitle":"Flashing the firmware","url":"/docs/Tutorial-Setup/Flashing-the-firmware#troubleshooting","content":"'Initiating reboot to bootloader' hangs If you're on Windows and it hangs while displaying Initiating reboot to bootloader, you'll need to install the proper driver for the STM32 BOOTLOADER device. Make sure the device STM32 BOOTLOADER is installed and showing up in the Device Manager, either under Other Devices or under Universal Serial Bus devices. Select View &gt; Show Hidden Devices in order to see all installed devices. You might need to uninstall all STM Device in DFU Mode devices under Universal Serial Bus Controllers before Windows will install the STM32 BOOTLOADER device. Make sure to check Delete the driver software for this device. In the Configurator, go to the CLI and type dfu. This puts the FC in Device Firmware Update mode. Start Zadig (see download link on the Welcome tab in the Configurator), select Options &gt; List all Devices, select STM32 BOOTLOADER and change the driver to WinUSB. Flash firmware should now work.  Error 'Rebooting device to bootloader: FAILED' If you receive the error Rebooting device to bootloader: FAILED then you will need to manually place the FC into bootloader mode. Do this by holding down the BOOT button while connecting it to your computer. Help... that didn't work. Its bricked! Ok, so after rebooting you are no longer able to connect to the FC via USB. This can happen if your configuration file is not correct (USB becomes unallocated) or if you have loaded the incorrect firmware for the processor type. Don't worry: the bootloader can't be bricked, it's in ROM. You can always reload the firmware via the DFU (device firmware update) mode. Most flight controllers have a 'boot' button or pins which are used to enter DFU mode. Generally you can just enter DFU mode by pushing the button or bridging the boot pins as you plug the USB in (while the Rotorflight Configurator is open).  Rotorflight Configurator will display DFU - STM32 BOOTLOADER at the top of the page after a successful DFU connection. Click on the Update Firmware and follow the steps above to re-flash the firmware as required.  ","version":"Next","tagName":"h2"},{"title":"Governor","type":0,"sectionRef":"#","url":"/docs/Tutorial-Setup/Governor","content":"","keywords":"","version":"Next"},{"title":"OFF​","type":1,"pageTitle":"Governor","url":"/docs/Tutorial-Setup/Governor#off","content":"The governor is disabled, and the stabilized throttle output ST is taken from the receiver throttle channel. ","version":"Next","tagName":"h3"},{"title":"PASSTHROUGH​","type":1,"pageTitle":"Governor","url":"/docs/Tutorial-Setup/Governor#passthrough","content":"The governor does not control the headspeed, but provides all the aux functions, like slow spool up, autorotation bailout, and error recovery. In the active state, the receiver throttle channel is directly passed through to the stabilized throttle output ST. ","version":"Next","tagName":"h3"},{"title":"STANDARD​","type":1,"pageTitle":"Governor","url":"/docs/Tutorial-Setup/Governor#standard","content":"The governor is stabilizing the headspeed with a standard PID control, similar to most ESCs. All aux functions are also active. ","version":"Next","tagName":"h3"},{"title":"MODE1​","type":1,"pageTitle":"Governor","url":"/docs/Tutorial-Setup/Governor#mode1","content":"Like STANDARD, but with collective/cyclic precompensation. This is similar to governors in most FBL systems. ","version":"Next","tagName":"h3"},{"title":"MODE2​","type":1,"pageTitle":"Governor","url":"/docs/Tutorial-Setup/Governor#mode2","content":"Like MODE1, but with battery voltage compensation. The PID loop does not need to react to battery voltage fluctuations, as it is taken into account outside the PID loop. This is usually the best choice. Can be used only if the battery voltage is connected to the FC. Governor Basic Settings  In order to use the governor you must first configure the ESC/Motor features. This defines the motor telemetry (for RPM feedback) and gear ratios for your helicopter which lets the flight controller know how fast the rotor is spinning. ","version":"Next","tagName":"h3"},{"title":"Spoolup time​","type":1,"pageTitle":"Governor","url":"/docs/Tutorial-Setup/Governor#spoolup-time","content":"This is an acceleration limit (in seconds) used for spooling up. It sets the acceleration limit that is equivalent to total time for spooling up from zero to full headspeed. For example, with a value of 10 and full headspeed of 3000rpm, the main rotor would take 10s to reach 3000rpm. ","version":"Next","tagName":"h3"},{"title":"Tracking time​","type":1,"pageTitle":"Governor","url":"/docs/Tutorial-Setup/Governor#tracking-time","content":"Acceleration limit (in seconds) for normal operation. This occurs when the requested headspeed command changes while the governor is in the active state. This parameter limits the rpm change speed (acceleration). For example, when set to a value of 10 (which is 10s to ramp 0-100%). If hovering in Normal mode at 1500rpm (50% throttle) and then switching to Idl3 of 3000rpm (100% throttle) the Governor would ramp over 5s. Typical value is 5..20. ","version":"Next","tagName":"h3"},{"title":"Recovery time​","type":1,"pageTitle":"Governor","url":"/docs/Tutorial-Setup/Governor#recovery-time","content":"Acceleration limit (in seconds) for error recovery. When the governor is recovering from lost headspeed or lost throttle signal, this is the max acceleration for the following (faster) spoolup. ","version":"Next","tagName":"h3"},{"title":"Autorotation bailout time​","type":1,"pageTitle":"Governor","url":"/docs/Tutorial-Setup/Governor#autorotation-bailout-time","content":"Acceleration limit (in seconds) for autorotation bailout. When the governor is spooling up from autorotation, it is limiting the spoolup speed with this parameter. ","version":"Next","tagName":"h3"},{"title":"Autorotation timeout​","type":1,"pageTitle":"Governor","url":"/docs/Tutorial-Setup/Governor#autorotation-timeout","content":"In the autorotation state, if high throttle returns before this timeout expires, the spoolup is done with bailout acceleration. After the expiration, the governor enters the idle state, and any subsequent spoolup is slow. ","version":"Next","tagName":"h3"},{"title":"Autorotation minimum entry time​","type":1,"pageTitle":"Governor","url":"/docs/Tutorial-Setup/Governor#autorotation-minimum-entry-time","content":"Minimum flight time before Autorotation can be engaged. ","version":"Next","tagName":"h3"},{"title":"Zero Throttle Timeout​","type":1,"pageTitle":"Governor","url":"/docs/Tutorial-Setup/Governor#zero-throttle-timeout","content":"When the throttle input (from receiver) goes to zero, the governor enters an intermediate state where it is waiting for the throttle to return. If the throttle returns before this timeout expires, the spoolup is done with the recovery acceleration. If the timeout expires, the governor enters off state, and any future spoolup will be slow. note The purpose of this feature is to allow fast spoolup in case the throttle cut (hold) is hit accidentally. If high throttle is returned very soon after, the heli will spool up quickly and hopefully keep on flying. Unit is 0.1s. Typical value is 5..50. ","version":"Next","tagName":"h3"},{"title":"Headspeed Signal Timeout​","type":1,"pageTitle":"Governor","url":"/docs/Tutorial-Setup/Governor#headspeed-signal-timeout","content":"If the headspeed rpm signal is lost, the governor enters an intermediate state where it is waiting for the rpm signal to return. If the signal returns before this timeout expires, the spoolup is done with the recovery acceleration. If the timeout expires, the governor enters the idle state, and any future spoolup would happen with the default (slow) spoolup acceleration. Unit is 0.1s. Typical value is 5..50. ","version":"Next","tagName":"h3"},{"title":"Headspeed Filter Cutoff [Hz]​","type":1,"pageTitle":"Governor","url":"/docs/Tutorial-Setup/Governor#headspeed-filter-cutoff-hz","content":"The inputs to the governor must be clean from excess noise. The RPM input is filtered with a BIQUAD filter, with the frequency cutoffs set by these variables. ","version":"Next","tagName":"h3"},{"title":"Battery Voltage Filter Cutoff [Hz]​","type":1,"pageTitle":"Governor","url":"/docs/Tutorial-Setup/Governor#battery-voltage-filter-cutoff-hz","content":"The inputs to the governor must be clean from excess noise. The Battery voltage input is filtered with a BIQUAD filter, with the frequency cutoffs set by these variables. ","version":"Next","tagName":"h3"},{"title":"TTA Filter Cutoff [Hz]​","type":1,"pageTitle":"Governor","url":"/docs/Tutorial-Setup/Governor#tta-filter-cutoff-hz","content":"Filter to smooth the Yaw signal before it is used for the TTA function (Torque Tail Assist) Governor Profiles Settings These settings are set from the Profiles Tab. If desired, individual Profiles can be configured via the Adjustments Tab. This enables individual flight modes to have separate tuning and configuration set for each flight mode. (similar to 'Bank Switching').  ","version":"Next","tagName":"h3"},{"title":"Full Headspeed​","type":1,"pageTitle":"Governor","url":"/docs/Tutorial-Setup/Governor#full-headspeed","content":"This is the highest headspeed that the governor would ever try to maintain, when the throttle input is at 100%. ","version":"Next","tagName":"h3"},{"title":"PID Master Gain​","type":1,"pageTitle":"Governor","url":"/docs/Tutorial-Setup/Governor#pid-master-gain","content":"Master gain multiplier ","version":"Next","tagName":"h3"},{"title":"P-Gain​","type":1,"pageTitle":"Governor","url":"/docs/Tutorial-Setup/Governor#p-gain","content":"Governor Proportional gain ","version":"Next","tagName":"h3"},{"title":"I-Gain​","type":1,"pageTitle":"Governor","url":"/docs/Tutorial-Setup/Governor#i-gain","content":"Governor Integral gain ","version":"Next","tagName":"h3"},{"title":"D-Gain​","type":1,"pageTitle":"Governor","url":"/docs/Tutorial-Setup/Governor#d-gain","content":"Governor Derivative gain ","version":"Next","tagName":"h3"},{"title":"Feedforward-Gain​","type":1,"pageTitle":"Governor","url":"/docs/Tutorial-Setup/Governor#feedforward-gain","content":"Governor Feedforward gain ","version":"Next","tagName":"h3"},{"title":"Cyclic precompensation​","type":1,"pageTitle":"Governor","url":"/docs/Tutorial-Setup/Governor#cyclic-precompensation","content":"Cyclic precompensation weight. Increasing the cyclic increases load on the rotor and causes it to slow down. This setting determines how much cyclic is mixed into the governor feedforward. This helps the governor maintain the headspeed proactively (i.e. increase power to the motor so it does not slow down). Usually 20..100 ","version":"Next","tagName":"h3"},{"title":"Collective precompensation​","type":1,"pageTitle":"Governor","url":"/docs/Tutorial-Setup/Governor#collective-precompensation","content":"Collective precompensation weight. Increasing the collective increases load on the rotor and causes it to slow down. This setting determines how much collective is mixed into the governor feedfoward. This helps the governor maintain the headspeed proactively (i.e. increase power to the motor so it does not slow down). Usually 20..100 Governor throttle input ranges With the governor feature activated, the transmitter throttle channel is controlling the governor, rather than the ESC directly. Depending in which range the throttle value falls into, the governor will function differently. ","version":"Next","tagName":"h3"},{"title":"THROTTLE < min_check​","type":1,"pageTitle":"Governor","url":"/docs/Tutorial-Setup/Governor#throttle--min_check","content":"This throttle value indicates throttle hold (throttle cut) condition. It's guaranteed that all motors are stopped immediately. The throttle output from the governor is guaranteed to be zero. note Make sure your transmitter is sending a value lower than min_check when throttle hold is activated. Throttle hold SHOULD NOT be used for autorotation. ","version":"Next","tagName":"h3"},{"title":"min_check < THROTTLE < 1100us​","type":1,"pageTitle":"Governor","url":"/docs/Tutorial-Setup/Governor#min_check--throttle--1100us","content":"In this range, the governor is in idle or autorotation state, and the output is zero - the main motor is stopped. note Motorized tail is fully active in this range. If you want to perform autorotation with the main motor stopped, use this range! ","version":"Next","tagName":"h3"},{"title":"1100us < THROTTLE < 1200us​","type":1,"pageTitle":"Governor","url":"/docs/Tutorial-Setup/Governor#1100us--throttle--1200us","content":"In this range, the governor is in idle or autorotation state, and the output is in 0% - 10%, increasing linearly through the range. note Motorized tail is fully active in this range. If you want to perform autorotation with the main motor running, use this range! ","version":"Next","tagName":"h3"},{"title":"1200us < THROTTLE < 2000us​","type":1,"pageTitle":"Governor","url":"/docs/Tutorial-Setup/Governor#1200us--throttle--2000us","content":"In this range, the governor is in active state, and the requested rpm is 20%..100% of the gov_headspeed. Governor State The governor internal state can be observed in the blackbox log. It is a good indication on what the governor is trying to do. OFF The governor is disabled and the throttle output is zero. IDLE The governor is idle, because the input throttle is in the idle range. The throttle output is as described above - 0..10%. SPOOLING_UP The input throttle has transitioned from low to high, and the governor is spooling up slowly. ACTIVE The governor has reached the target headspeed and is actively maintaining it. LOST_THROTTLE The throttle signal has suddenly dropped from high to low. If the throttle returns quickly, a recovery spoolup is performed. This state is for convenience, when the pilot accidentally hits throttle hold, and then realizes the mistake. LOST_HEADSPEED The RPM input signal is lost. The governor will wait for a little while for the signal to return, before spooling down. It the signal returns quickly, a recovery spoolup is performed. RECOVERY The governor is performing a recovery spoolup after one of the conditions above. AUTOROTATION The throttle has dropped from high to the autorotation range. The governor is expecting the throttle to return once the autorotation has been performed. Once the throttle return, the governor moves to the state below. AUTOROTATION_BAILOUT Throttle has returned while in AutoRotation state, and the governor is performing an autorotation bailout. ","version":"Next","tagName":"h3"},{"title":"Help - Frequent questions?","type":0,"sectionRef":"#","url":"/docs/Tutorial-Setup/Help-Common-Questions","content":"","keywords":"","version":"Next"},{"title":"Motor won't start​","type":1,"pageTitle":"Help - Frequent questions?","url":"/docs/Tutorial-Setup/Help-Common-Questions#motor-wont-start","content":"Is ARM mode configured?  Please check your Arm Mode has been enabled. See details in the Modes Note!! Arm and Throttle hold need to be on different switches. The FC must see minimum throttle before Arm is enabled; therefore, if Arm activates at the same time as throttle hold is removed, it will fail the minimum check. Check status page for Arming disables  Using a Governor?  Does the Motor spool in Governor 'passthrough'. If not this could indicate a pin or timer allocation issue. Also please check your Receiver is connected and has the correct channel order. Does the Motor spool in Governor 'Mode 1'. Please confirm you have either Frequency input or Bi-directional Dshot enabled and functioning. Using the Motor override run the motor at minimum speed and confirm there an RPM signal present Governor mode 'Mode 2'. If the motor is able to spool in the other modes but not Mode 2 it means the Battery Voltage is not available. Please update this in the Power tab.  ","version":"Next","tagName":"h2"},{"title":"Telemetry​","type":1,"pageTitle":"Help - Frequent questions?","url":"/docs/Tutorial-Setup/Help-Common-Questions#telemetry","content":" ","version":"Next","tagName":"h2"},{"title":"servo don't respond​","type":1,"pageTitle":"Help - Frequent questions?","url":"/docs/Tutorial-Setup/Help-Common-Questions#servo-dont-respond","content":"Are servos visible in the servo Tab?  Review the remapping and add servos From the servo override does the servo move? Confirm connection of the servosConfirm servos are poweredCheck all servos. Servo moves in override but not  Confirm miser has been chosen from the Mixer tab ","version":"Next","tagName":"h2"},{"title":"LED Strip","type":0,"sectionRef":"#","url":"/docs/Tutorial-Setup/LED-Strip","content":"","keywords":"","version":"Next"},{"title":"Supported hardware​","type":1,"pageTitle":"LED Strip","url":"/docs/Tutorial-Setup/LED-Strip#supported-hardware","content":"Only strips of 32 WS2811/WS2812 LEDs are supported currently. If the strip is longer than 32 LEDs it does not matter, but only the first 32 are used. WS2812 LEDs require an 800khz signal and precise timings and thus requires the use of a dedicated hardware timer. Note: Not all WS2812 ICs use the same timings, some batches use different timings. It could be possible to be able to specify the timings required via CLI if users request it. ","version":"Next","tagName":"h2"},{"title":"Tested Hardware​","type":1,"pageTitle":"LED Strip","url":"/docs/Tutorial-Setup/LED-Strip#tested-hardware","content":"Adafruit NeoPixel Jewel 7 (preliminary testing) Measured current consumption in all white mode ~ 350 mA.Fits well under motors on mini 250 quads. Adafruit NeoPixel Stick (works well) Measured current consumption in all white mode ~ 350 mA. ","version":"Next","tagName":"h3"},{"title":"Connections​","type":1,"pageTitle":"LED Strip","url":"/docs/Tutorial-Setup/LED-Strip#connections","content":"WS2812 LED strips generally require a single data line, 5V and GND. WS2812 LEDs on full brightness can consume quite a bit of current. It is recommended to verify the current draw and ensure your 5V power source can cope with the load. uses. e.g. ESC1/BEC1 -&gt; FC, ESC2/BEC2 -&gt; LED strip. It's also possible to power one half of the strip from one BEC and the other half LED Strip pin should be on a separate timer. If you have LEDs that are intermittent, flicker or show the wrong colors then drop the VIN to less than 4.7v, e.g. by using an inline diode on the VIN to the LED strip. The problem occurs because of the difference in voltage between the data signal and the power signal. The WS2811 LED's require the data signal (Din) to be between 0.3 Vin (Max) and 0.7 VIN (Min) to register valid logic low/high signals. The LED pin on the CPU will always be between 0v to ~3.3v, so the Vin should be 4.7v (3.3v / 0.7 = 4.71v). Some LEDs are more tolerant of this than others. The datasheet can be found here: WS2812 ","version":"Next","tagName":"h2"},{"title":"Configuration​","type":1,"pageTitle":"LED Strip","url":"/docs/Tutorial-Setup/LED-Strip#configuration","content":"The led strip feature can be configured via the GUI GUI: Enable the Led Strip feature via the GUI under setup. Configure the leds from the Led Strip tab in the Rotorflight GUI. First setup how the led's are laid out so that you can visualize it later as you configure and so the flight controller knows how many led's there are available. There is a step by step guide on how to use the GUI to configure the Led Strip feature using the GUI Setting up RGB LED which was published early 2015 by Oscar Liang which may or may not be up-to-date by the time you read this. CLI: Enable the LED_STRIP feature via the cli: feature LED_STRIP  If you enable LED_STRIP feature and the feature is turned off again after a reboot then check your config does not conflict with other features, as above. Configure the LEDs using the led command. The led command takes either zero or two arguments - an zero-based led number and a sequence which indicates pair of coordinates, direction flags and mode flags and a color. If used with zero arguments it prints out the led configuration which can be copied for future reference. Each led is configured using the following template: x,y:ddd:mmm:cc x and y are grid coordinates of a 0 based 16x16 grid, north west is 0,0, south east is 15,15ddd specifies the directions, since an led can face in any direction it can have multiple directions. Directions are: N - NorthE - EastS - SouthW - WestU - UpD - Down For instance, an LED that faces South-east at a 45 degree downwards angle could be configured as SED. Note: It is perfectly possible to configure an LED to have all directions NESWUD but probably doesn't make sense. mmm specifies the modes that should be applied an LED. Modes are: W - Wwarnings.F - Flight mode &amp; OrientationI - Indicator.A - Armed state.T - Thrust state.R - Ring thrust state.C - Color. cc specifies the color number (0 based index). Example: led 0 0,15:SD:IAW:0 led 1 15,0:ND:IAW:0 led 2 0,0:ND:IAW:0 led 3 0,15:SD:IAW:0 led 4 7,7::C:1 led 5 8,8::C:2  To erase an led, and to mark the end of the chain, use 0,0:: as the second argument, like this: led 4 0,0:::  It is best to erase all LEDs that you do not have connected. ","version":"Next","tagName":"h2"},{"title":"Modes​","type":1,"pageTitle":"LED Strip","url":"/docs/Tutorial-Setup/LED-Strip#modes","content":"Warning​ This mode simply uses the LEDs to flash when warnings occur. Warning\tLED Pattern\tNotesArm-lock enabled\tflash between green and off\toccurs calibration or when unarmed and the aircraft is tilted too much Low Battery\tflash red and off\tbattery monitoring must be enabled. May trigger temporarily under high-throttle due to voltage drop Failsafe\tflash between light blue and yellow\tFailsafe must be enabled Flash patterns appear in order, so that it's clear which warnings are enabled. Flight Mode &amp; Orientation​ This mode shows the flight mode and orientation. When flight modes are active then the LEDs are updated to show different colors depending on the mode, placement on the grid and direction. LEDs are set in a specific order: LEDs that marked as facing up or down.LEDs that marked as facing west or east AND are on the west or east side of the grid.LEDs that marked as facing north or south AND are on the north or south side of the grid. That is, south facing LEDs have priority. The mapping between modes led placement and colors is currently fixed and cannot be changed. Indicator​ This mode flashes LEDs that correspond to roll and pitch stick positions. i.e. they indicate the direction the craft is going to turn. Mode\tDirection\tLED ColorOrientation\tNorth\tWHITE Orientation\tEast\tDARK VIOLET Orientation\tSouth\tRED Orientation\tWest\tDEEP PINK Orientation\tUp\tBLUE Orientation\tDown\tORANGE Head Free\tNorth\tLIME GREEN Head Free\tEast\tDARK VIOLET Head Free\tSouth\tORANGE Head Free\tWest\tDEEP PINK Head Free\tUp\tBLUE Head Free\tDown\tORANGE Horizon\tNorth\tBLUE Horizon\tEast\tDARK VIOLET Horizon\tSouth\tYELLOW Horizon\tWest\tDEEP PINK Horizon\tUp\tBLUE Horizon\tDown\tORANGE Angle\tNorth\tCYAN Angle\tEast\tDARK VIOLET Angle\tSouth\tYELLOW Angle\tWest\tDEEP PINK Angle\tUp\tBLUE Angle\tDown\tORANGE Mag\tNorth\tMINT GREEN Mag\tEast\tDARK VIOLET Mag\tSouth\tORANGE Mag\tWest\tDEEP PINK Mag\tUp\tBLUE Mag\tDown\tORANGE Baro\tNorth\tLIGHT BLUE Baro\tEast\tDARK VIOLET Baro\tSouth\tRED Baro\tWest\tDEEP PINK Baro\tUp\tBLUE Baro\tDown\tORANGE Armed state​ This mode toggles LEDs between green and blue when disarmed and armed, respectively. Note: Armed State cannot be used with Flight Mode. Thrust state​ This mode fades the LED current LED color to the previous/next color in the HSB color space depending on throttle stick position. When the throttle is in the middle position the color is unaffected, thus it can be mixed with orientation colors to indicate orientation and throttle at the same time. Thrust should normally be combined with Color or Mode/Orientation. Thrust ring state​ This mode is allows you to use a 12, 16 or 24 leds ring (e.g. NeoPixel ring) for an afterburner effect. When armed the leds use the following sequences: 2 On, 4 Off, 2 On, 4 Off, and so on. The light pattern rotates clockwise as throttle increases. A better effect is achieved when LEDs configured for thrust ring have no other functions. LED direction and X/Y positions are irrelevant for thrust ring LED state. The order of the LEDs that have the state determines how the LED behaves. Each LED of the ring can be a different color. The color can be selected between the 16 colors availables. For example, led 0 is set as a Ring thrust state led in color 13 as follow. led 0 2,2::R:13  LED strips and rings can be combined. Solid Color​ The mode allows you to set an LED to be permanently on and set to a specific color. x,y position and directions are ignored when using this mode. Other modes will override or combine with the color mode. For example, to set led 0 to always use color 10 you would issue this command. led 0 0,0::C:10  ","version":"Next","tagName":"h3"},{"title":"Colors​","type":1,"pageTitle":"LED Strip","url":"/docs/Tutorial-Setup/LED-Strip#colors","content":"Colors can be configured using the cli color command. The color command takes either zero or two arguments - an zero-based color number and a sequence which indicates pair of hue, saturation and value (HSV). See HSL and HSV If used with zero arguments it prints out the color configuration which can be copied for future reference. The default color configuration is as follows: Index\tColor0\tblack 1\twhite 2\tred 3\torange 4\tyellow 5\tlime green 6\tgreen 7\tmint green 8\tcyan 9\tlight blue 10\tblue 11\tdark violet 12\tmagenta 13\tdeep pink 14\tblack 15\tblack color 0 0,0,0 color 1 0,255,255 color 2 0,0,255 color 3 30,0,255 color 4 60,0,255 color 5 90,0,255 color 6 120,0,255 color 7 150,0,255 color 8 180,0,255 color 9 210,0,255 color 10 240,0,255 color 11 270,0,255 color 12 300,0,255 color 13 330,0,255 color 14 0,0,0 color 15 0,0,0  ","version":"Next","tagName":"h3"},{"title":"Troubleshooting​","type":1,"pageTitle":"LED Strip","url":"/docs/Tutorial-Setup/LED-Strip#troubleshooting","content":"On initial power up the LEDs on the strip will be set to WHITE. This means you can attach a current meter to verify the current draw if your measurement equipment is fast enough. Most 5050 LEDs will draw 0.3 Watts a piece. This also means that you can make sure that each R,G and B LED in each LED module on the strip is also functioning. After a short delay the LEDs will show the unarmed color sequence and or low-battery warning sequence. Also check that the feature LED_STRIP was correctly enabled and that it does not conflict with other features, as above. ","version":"Next","tagName":"h2"},{"title":"LUA Scripts","type":0,"sectionRef":"#","url":"/docs/Tutorial-Setup/LUA-Scripts","content":"","keywords":"","version":"Next"},{"title":"Introduction​","type":1,"pageTitle":"LUA Scripts","url":"/docs/Tutorial-Setup/LUA-Scripts#introduction","content":"You can adjust a variety of settings using only your transmitter with the Rotorflight Lua scripts. They allow you to change things like PIDs, rates, filters, failsafe and governed headspeed on the field. Prerequisites: OpenTX 2.3.12 or EdgeTX 2.5.0 or newer on the transmitter anda FrSky SmartPort or F.Port receiveror a Crossfire v2.11 or newer receiveror an ELRS 2.0.1 or newer receiver. Examples: TX16S with a FrSky X4R using the FrSkyX2 protocol.Taranis X9D with a TBS Crossfire TX/RX module.Taranis QX7 and a FrSky R-XSR, using the FrSky D16 protocol (as long as you don't use the ACCST D16 2.1.1 LBT firmware on the R-XSR, because this firmware has telemetry bugs).TX16S with an ELRS 2.0.1 module and receiver. If you're not using F.Port, start up the Rotorflight Configurator, go to the Configuration tab and enable the TELEMETRY feature. F.Port telemetry does work without enabling this feature. If telemetry is working properly on your system, the Lua scripts should work as well. ","version":"Next","tagName":"h2"},{"title":"Installation​","type":1,"pageTitle":"LUA Scripts","url":"/docs/Tutorial-Setup/LUA-Scripts#installation","content":"Download the latest release and copy the contents of the SCRIPTS folder to your transmitter. See also the readme. and copy the contents of the SCRIPTS folder to your transmitter. You will know if you did this correctly if the rf2.lua file shows up in the /SCRIPTS/TOOLS directory. Also Rotorflight conf should now show up in the Tools menu of your transmitter. ","version":"Next","tagName":"h2"},{"title":"Usage​","type":1,"pageTitle":"LUA Scripts","url":"/docs/Tutorial-Setup/LUA-Scripts#usage","content":"On your transmitter, go to the Tools menu of your transmitter and select Rotorflight conf.  The first time you do this all scripts will be compiled and the Tools menu will be displayed again. Select Rotorflight conf again. Now the script will wait for a connection with the receiver.  Power up the receiver. The script will retrieve the API version used by Rotorflight and the device ID of the flight controller. After this you will see the main menu.  Here you can select what you want to change. For example, select PIDs.  Now you can change the values of your PIDs. If you want to save your changes, long press the wheel/roller. The Page menu should now pop up. Select Save page to send your changes to the flight controller. Or press Exit to exit the Page menu.  There's quite a lot of settings you can adjust on the field. Here's an overview of all the pages:  Feel free to have a look at any page. As long as you don't select Save page, nothing will be changed. ","version":"Next","tagName":"h2"},{"title":"Background script​","type":1,"pageTitle":"LUA Scripts","url":"/docs/Tutorial-Setup/LUA-Scripts#background-script","content":"The optional background script offers RTC synchronization and RSSI through MSP. RTC synchronization will send the time of the transmitter to the flight controller. The script will beep if RTC synchronization has been completed. Blackbox logs and files created by the FC will now have the correct timestamp. The background script can be setup as a special or global function in OpenTX. The image below shows how to configure the background script as a special function. By doing this, the script will automatically run as soon as the model is selected.  ","version":"Next","tagName":"h2"},{"title":"Modes","type":0,"sectionRef":"#","url":"/docs/Tutorial-Setup/Modes","content":"","keywords":"","version":"Next"},{"title":"ARM​","type":1,"pageTitle":"Modes","url":"/docs/Tutorial-Setup/Modes#arm","content":"All flight controllers need to be enabled before the motors are able to spool up. Once the Arming mode is configured (as shown above) the flight controller can be Armed ready for flight. If the flight controller detects an unsafe condition Arming will be disabled. If this occurs you can look at the Arming flag status on the Status Tab to identify what is preventing Arming being enabled.  You can find out a description of these flags from the List of Arming prevention flags This function can also provide the ability to prevent arming of the heli unless the correct model has been selected on your transmitter (if your RX does not have this functionality). This is done by adjusting the endpoint of your AUX channel to a different value for each model and setting the ARM range to enable the FC only for that model. ","version":"Next","tagName":"h2"},{"title":"Rescue​","type":1,"pageTitle":"Modes","url":"/docs/Tutorial-Setup/Modes#rescue","content":"Enable Rescue mode from the tabs. Allocate the Aux channel and range to suit. info The purpose of the rescue mode is to arrest any decent, then put the helicopter at a safe altitude in a stable attitude. It does this in stages. Immediately levels in current orientation (upright or inverted)Applies a pull up collective to rapidly stop any decent Applies a climb Collective to gain some heightif it is still inverted (and the flip toggle enabled) it will flip to upright.Hover collective is now applied. After enabling Rescue mode configure the rescue settings from the Profiles Tab shown below:  Enable Rescue​ Enable or disable the rescue mode. Pull up collective​ Values 0.0-100. This is to be set to a level where the helicopter rapidly gains height. Pull up time​ How long pull up collective should be applied. This is usually about 0.3 to 0.5s Climb collective​ Values 0.0-100. This is to be set to a level where the helicopter gains height. Climb up time​ How long Climb collective should be applied. This is usually about 0.5 to 1.5s Hover collective​ Increase this value until the heli hovers at a stable altitude Flip Fail time​ This is a safety feature. If there is a mechanical issue preventing the helicopter from completing the flip during this time the rescue mode will exit Exit time​ This slows the transition from rescue back to normal mode. This is helpful if you have rescued from inverted where your collective may be in the opposite direction. This prevents it from rapidly pitching down. Leveling gain​ How strong the helicopter will level. Too low and the helicopter will be sluggish to level. Too hich and it will wobble/vibrate Flip to upright gain​ How strong the helicopter will flip to upright. Max level rate​ Used to control how fast the helicopter levels. Set this to a value that is achievable by your helicopter. Larger slower helicopters may need this reduced Max acceleration​ Limit how fast the controller tries to accelerate the helicopter to level or flip. Larger slower helicopters may need this reduced ","version":"Next","tagName":"h2"},{"title":"6G flight modes​","type":1,"pageTitle":"Modes","url":"/docs/Tutorial-Setup/Modes#6g-flight-modes","content":"info There are 3 types of self leveling stabilization modes available in Rotorflight. 6G modes (unlike the normal Acro) will auto level when the transmitter sticks are released. These modes make the heli fly more like a drone. Angle Horizon Acro Trainer   Horizon - Horizon mode provides attitude stabilization which will level the helicopter when the transmitter sticks are let go. Constant stick input is required to keep the helicopter moving.  Horizon Mode leveling gain​ Gain to define how aggressively the helicopter levels while in Horizon mode. Angle - Angle mode provides similar functionality to Horizon mode with the addition of limiting the helicopter attitude to the angle specified.  Angle Mode leveling gain​ Gain to define how aggressively the helicopter levels while at the Angle limit. Angle Mode maximum angle​ Limit the helicopter to a maximum of this angle while in Angle mode. Acro Trainer - Acro trainer mode does not provide self leveling of the helicopter. It does however limit the angle the helicopter can reach.  Acro Trainer gain​ Gain to define how aggressively the helicopter corrects while at the level limit. Acro Trainer level limit​ Limit the helicopter to a maximum of this angle while in Acro trainer mode. ","version":"Next","tagName":"h2"},{"title":"Motor and ESC","type":0,"sectionRef":"#","url":"/docs/Tutorial-Setup/Motor-and-Esc","content":"","keywords":"","version":"Next"},{"title":"PWM Protocol​","type":1,"pageTitle":"Motor and ESC","url":"/docs/Tutorial-Setup/Motor-and-Esc#pwm-protocol","content":"Most RC helicopter ESCs manufacturers (e.g. Hobbywing, YGE, Scorpion ,or Castle) use PWM, an analog protocol.  ESC Update Frequency: the PWM update frequency for your ESC. Usually between 50-400Hz. Disarm Throttle PWM value: the value that is sent to the ESC when the craft is disarmed. It should stop the motors. Usually 1000µs. 0% Throttle PWM value: the value that is sent to the ESC when the craft is armed and at 0% throttle. Usually 1070µs. 100% Throttle PWM value: the value that is sent to the ESC when the craft is armed and at full throttle. Usually 2000µs. ","version":"Next","tagName":"h3"},{"title":"DSHOT Protocol​","type":1,"pageTitle":"Motor and ESC","url":"/docs/Tutorial-Setup/Motor-and-Esc#dshot-protocol","content":"Most drone ESCs support DSHOT, a digital protocol.  If you use DSHOT, use either DSHOT150 or DSHOT300. DSHOT600 is not recommended. Also make sure that the main motor isn't actively being braked by the ESC, especially if you don't have a one way bearing on the main shaft. BLHeli_32: set Non Damped Mode to On on the main motor ESCBluejay: set Maximum Breaking Strength to 0 Bidirectional DSHOT​ This switch is only visible when the ESC/Motor protocol is DSHOTxxx. It enables motor eRPM telemetry on supported ESCs via bidirectional DSHOT and can be used to facilitate the GOVERNOR and/or RPM_FILTER features. If you use bidirectional DSHOT you don't have to use a frequency sensor for obtaining the eRPM of the motor(s). ","version":"Next","tagName":"h3"},{"title":"Gear Ratio Configuration​","type":1,"pageTitle":"Motor and ESC","url":"/docs/Tutorial-Setup/Motor-and-Esc#gear-ratio-configuration","content":" Enter the number of teeth for the main rotor gearing [Teeth on Pinion gear]/[Teeth on Main Gear]. For a direct drive Main rotor this is just set to 1 / 1. Enter the number of teeth for the Tail rotor gearing [Teeth on Tail gear]/[Teeth on Autorotation Gear]. For a direct drive tail this is just set to 1 / 1. note If the gear tooth count is not know, you can use the gear ratio instead. For example if the main gear ratio is 11.8 then you set [Teeth on Pinion gear =10]/[Teeth on Main Gear =118]. Similarly if the tail gear ratio is 4.8 then you set [Teeth on Tail gear =10]/[Teeth on Autorotation Gear =48]. ","version":"Next","tagName":"h3"},{"title":"Motor Pole Count​","type":1,"pageTitle":"Motor and ESC","url":"/docs/Tutorial-Setup/Motor-and-Esc#motor-pole-count","content":"Determine the number of magnetic poles for each motor. Count the number of magnets on the motors rotor. In the example below the magnets (circled) are fixed to the outer bell which in total has 14. This allows the flight controller to know how many electrical phase rotations are required to complete one physical motor revolution.   ","version":"Next","tagName":"h3"},{"title":"Motor Override​","type":1,"pageTitle":"Motor and ESC","url":"/docs/Tutorial-Setup/Motor-and-Esc#motor-override","content":"Motor Override functionality is provided to test the operation of each motor directly. This functionality will make the motors spool up. Do this WITHOUT the main or tail rotors fitted!  Throttle - This is the command being sent from the flight controller to the ESC. RPM - The measured RPM telemetry feedback. As the motor spins this should read a value related to the current speed. Errors (only with DSHOT) - This shows the status of the RPM telemetry signal. This should be 0%. Slider If you use the slider, make sure you release the mouse button. Nothing changes as long as you hold the mouse button down! BLHeliSuite32 The Test motors function in BLHeliSuite32 doesn't work when using Rotorflight. It will give an error like 'Initialization of Motor Test Mode failed! Please check current Unknown rev 4.3.0 support for this application function!'. ","version":"Next","tagName":"h2"},{"title":"Profiles","type":0,"sectionRef":"#","url":"/docs/Tutorial-Setup/Profiles","content":"","keywords":"","version":"Next"},{"title":"Main Tuning Parameters​","type":1,"pageTitle":"Profiles","url":"/docs/Tutorial-Setup/Profiles#main-tuning-parameters","content":" Proportional​ The gain factor that is proportional to the rate error. High proportional gain increase response speed of the helicopter. Low proportional gain results in overall slow system response. Too high results in fast oscillation (~20hz). It also helps reduce the slow oscillation due to high Integral gain. Integral​ The gain factor that is proportional to the accumulated error. Low integral gain results in drift when hovering, and uneven roll or flip rate during continuous roll / flips. It also results in the helicopter not &quot;wanting&quot; to finish maneuvers. Integral too high results in slow oscillation (1-3hz) during cyclic input stops and/or during high disturbance scenarios such as stops of (piro) pitch pumps and tick-tock stops. Derivative​ The gain factor proportional to the change of error. It is responsible for &quot;dampening&quot; the overshoot caused by proportional gain. The Derivative gain is particularly sensitive to noise. Ideally, high derivative gain dampens the system too much results in slow response. However, in practice, noise-induced fast oscillation would occur first. Too low results in fast oscillation during stops due to high proportional gain. Feedforward​ The gain factor proportional to the input. In practice, feedforward gain is used to eliminate I-term windup, which occurs after continuous flips and rolls. If the helicopter does not stop immediately and continue moving in the rolling / flipping direction, feedforward gain needs to be increased. If FF gain is set to be too high, the helicopter may overshoot during such maneuver. Thus it is advised to start tuning from low. Boost​ The setpoint boost - or B-term will increase the stick reaction speed. In case the heli is not reacting fast enough, the reaction can be boosted with this new B-gain on each axis separately. This seems to be in the range of 20..50 This provides a rapid short term increase in your command. This parameter is used in conjunction with the time B-Cutoff. ","version":"Next","tagName":"h2"},{"title":"Advanced Settings​","type":1,"pageTitle":"Profiles","url":"/docs/Tutorial-Setup/Profiles#advanced-settings","content":" Error Rotation​ If turned on, the I-term can transfer between pitch and roll axis during pirouetting. Increase the performance of overall piro related maneuvers. This is sometimes referred to as Piro compensation. Error Decay​ A safety feature. This is to prevent the helicopter from tilting during takeoff. Error Limits​ The limit of how much I-term can be charged. During normal flights, it would not reach this limit. (More info needed) I-term Relax Type​ The axis that I-term relax is applied to. Generally this is Roll, Pitch and Yaw (RPY) I-term Relax Cutoff Point​ The I-term relax corresponds to the speed of control input for a given axis. When the control input exceed a certain speed, I-term would stop charging. This partially solved the slow overshoot at cyclic input stops due to I-gain charging at fast stick input. The cutoff value corresponds to the input FREQUENCY. A lower value gives more I-term relax, and a higher value provides less I-term relax. It is advised to start high and decrease until bounce back disappears. Error Limits​ This is a hard limit for the Error to limit I-term. Offset Gains​ The offset gains are used for the High Speed Integral feature. Offset gain or O-Gain is still being tested. It is currently only available if PID mode is set to 3 from the CLI set pid_mode = 3 Offset Limits​ This is a hard limit for the O-gain. ","version":"Next","tagName":"h2"},{"title":"Yaw Settings​","type":1,"pageTitle":"Profiles","url":"/docs/Tutorial-Setup/Profiles#yaw-settings","content":" CW/CCW Stop Gain​ The increase of yaw (what) gain during stops. Higher gain results in crisper stops. Too high may cause fast oscillations. Cyclic Feedforward Gain​ Since cyclic input creates more torque on the main rotor, this gain aims to pre-compensate the tail motion due to cyclic inputs. a high cyclic value results CW motion on tail when starting pitching/rolling, a low value results CCW motion. (for CW main rotor) Collective Feedforward Gain​ The pre-compensation due to the increase of collective pitch. It is advised to tune it based on the immediate response after a the beginning of a climb up. Higher gain results in CW response, lower gain results in CCW response. It is advised to use a lower value since it may affect tail performance during other maneuvers. Collective Impulse Feedforward Gain​ The pre-compensation due to the sudden change of collective. Ideally it is designed to clean up any tail movement in small pitch pumps, however, the compensation is generally overcompensating. Thus it is suggested to turn it off for now. ","version":"Next","tagName":"h2"},{"title":"Pitch Settings​","type":1,"pageTitle":"Profiles","url":"/docs/Tutorial-Setup/Profiles#pitch-settings","content":" Collective Feedforward Gain​ The pre-compensation for pitch axis when collective is high. Since there is drag-induced pitching motion (there is more drag on the tail thus the helicopter would want to have nose-up tendency when climbing), increasing this gain would compensate that. High gain push the nose down during climb ups. However, it is also advised to select a relatively low value to be conservative. ","version":"Next","tagName":"h2"},{"title":"PID Controller Bandwidth​","type":1,"pageTitle":"Profiles","url":"/docs/Tutorial-Setup/Profiles#pid-controller-bandwidth","content":" Row/Pitch/Yaw Bandwidth​ An extra low pass filter for each axis. It is specifically designed to preserve a weaker filter on the yaw axis to increase tail performance. High value corresponding to weaker filter. Too high may cause wobbles. Too low may cause delay and even instability in the control loop. Row/Pitch/Yaw D-term cutoff​ An extra first order low pass filter just for the D-gain to further reduce the sensitivity to noise. A high value decreases the effectiveness but may potentially increase the D-gain performance. A low value increase the filter effect but may hinder D-term effectiveness. It is advised to keep it around 20Hz to prevent oscillation. B-Term Cut-off​ This is controlling how &quot;quick&quot; or &quot;twitchy&quot; the boost is. This works exactly the same as D-cutoff, but on setpoint. It is safe to start with the same cutoffs as used with D. Usually in the range of 10..20. This is used in conjunction with Boost or B-gain ","version":"Next","tagName":"h2"},{"title":"Copy Profile​","type":1,"pageTitle":"Profiles","url":"/docs/Tutorial-Setup/Profiles#copy-profile","content":"You can use the Copy profile button at the upper right corner to copy the values of the current profile to another one. ","version":"Next","tagName":"h2"},{"title":"Mixer","type":0,"sectionRef":"#","url":"/docs/Tutorial-Setup/Mixer","content":"","keywords":"","version":"Next"},{"title":"Main Rotor Settings​","type":1,"pageTitle":"Mixer","url":"/docs/Tutorial-Setup/Mixer#main-rotor-settings","content":"Swashplate type​ Choose the swash type that suits your helicopter.  Rotor direction​ Choose the direction of rotation for the main rotor. This is looking down from on the top of the rotor. Elevator Control direction​ With the helicopter servos powered, tilt the heli forward (pitch down). The swash should now pitch up towards the tail of the helicopter. If this is not the case, change the control direction from [NORMAL] to [REVERSE]. Aileron Control direction​ Roll the heli to the right (right Aileron). The swash should pitch towards the left. If this is not the case, change the control direction from [NORMAL] to [REVERSE]. Collective Control direction​ Push the collective stick forward (Increasing collective). The swash should now rise up towards the rotor head (to increase collective). If the swash goes down change the control direction from [NORMAL] to [REVERSE]. ","version":"Next","tagName":"h3"},{"title":"Swashplate Link Trims​","type":1,"pageTitle":"Mixer","url":"/docs/Tutorial-Setup/Mixer#swashplate-link-trims","content":" Ideally the swashplate should be set with all 3 Collective servos at 90 deg while the blade angle is at 0 degrees. Some helicopters have fixed length swash links which means in order to get 0 degrees for blade centre the servo arms need to be raised or lowered. Use these link trims to provide that function. For helicopters with adjustable swash links this should remain at 0 and the links adjusted to get a 0 degree blade angle. ","version":"Next","tagName":"h2"},{"title":"Main Rotor Geometry​","type":1,"pageTitle":"Mixer","url":"/docs/Tutorial-Setup/Mixer#main-rotor-geometry","content":" Cyclic and Collective calibration​ These settings are used to calibrate the mixer so that the blade angle matches the commanded angle for both the cyclic and collective. See the calibration procedure for details. Collective blade pitch limit​ Ideally, one should use this option to set the maximum allowed collective blade pitch. Therefore, if the person wants to change the collective pitch down the line, they should be able to adjust in the &quot;rates&quot; page confidently without worrying about servos binding. Practically, for most 3D helicopters, this is set to the maximum collective you will ever need (15-16deg) if the helicopter is physically capable of doing it Cyclic blade pitch limit​ This is NOT the same as the collective calibration on other FBLSThis is designed to let the FBL know how much cyclic travel the helicopter is PHYSICALLY capable ofUsually adjust it so that around zero collective there is no physical interference anywhere. You might want to temporally increase the I gains (to around 200) on cyclic and move the cyclic stick to find the limits. MAKE SURE TO TURN THEM BACKSome 550+ size helicopter might be able to achieve 16+ degree of cyclic pitch, you could set it to the absolutely maximum but It is advised to limit it to around 16degree since practically it should never hit that much cyclic. Total blade pitch limit​ This is probably the most difficult limit to understand and setup properlyTo find the total blade pitch limit, make sure the collective blade pitch limit and cyclic blade pitch limit. You might want to use the I-gain trick mentioned aboveSet the collective pitch to max, then move the cyclic. Increase the limit until either there is a physical limit or the fish-eye bearing (the ball) in the center of the swash drops at the max cyclic due to one servo reaching its limit.Repeat at lowest collective pitchYou could also increase cyclic servo travels to gain more total blade pitch. However, nothing should be interferingDouble check that theres NO binding or interference at ANY combination of collective and cyclic in their whole range.Make sure to turn the I-gains back to default in the end if the I-gain trick is used. Swashplate phase angle​ Usually set it per manufactur recommendtion. One could consider if theres bobbling that could not be resolved from changing the cross coupling gains or it is known that the rotor head design requires a non-zero phase angle. ","version":"Next","tagName":"h2"},{"title":"Tail Rotor Settings​","type":1,"pageTitle":"Mixer","url":"/docs/Tutorial-Setup/Mixer#tail-rotor-settings","content":" Tail rotor type​ This is either Variable (for a servo controlled tail) or Motorized. ","version":"Next","tagName":"h2"},{"title":"Calibrating The mixer​","type":1,"pageTitle":"Mixer","url":"/docs/Tutorial-Setup/Mixer#calibrating-the-mixer","content":"note The purpose of the mixer calibration is to set the helicopters physical blade angle to the angle commanded by the FC ","version":"Next","tagName":"h2"},{"title":"Mixer override​","type":1,"pageTitle":"Mixer","url":"/docs/Tutorial-Setup/Mixer#mixer-override","content":"Set the mixer override at the bottom of the pages to ON. This will open the override window.  ","version":"Next","tagName":"h3"},{"title":"Collective Calibration​","type":1,"pageTitle":"Mixer","url":"/docs/Tutorial-Setup/Mixer#collective-calibration","content":"Confirm with a blade pitch tool that with collective mixer at 0 deg the blades are also at 0 deg. Set the collective mixer override to 9 deg. Measure the blade angle. If the Blade angle is different from the Override angle, increase or decrease Collective Calibration % until the bade angle matches. Set collective back to 0 deg. ","version":"Next","tagName":"h3"},{"title":"Cyclic Calibration​","type":1,"pageTitle":"Mixer","url":"/docs/Tutorial-Setup/Mixer#cyclic-calibration","content":"Set the pitch override to 9 deg. Measure the blade pitch Increase or decrease the Cyclic Calibration % ","version":"Next","tagName":"h3"},{"title":"Variable pitch Yaw Calibration​","type":1,"pageTitle":"Mixer","url":"/docs/Tutorial-Setup/Mixer#variable-pitch-yaw-calibration","content":"Set YAW override to 0 deg.In servo page, set the center so that the yaw servo arm is leveled.Adjust linkage to get the tail blades to 2-3 degrees or follow the manualSet the Center trim for tail rotor so that the tail blades are at 0 degreesSet the Override to a value (e.g. 30 deg) Measure the tail blade angle (fold the tail blades and compare the angle to a 60 deg ruler)Adjust the Yaw Calibration % so that the tail blade angle matches the commanded angle. ","version":"Next","tagName":"h3"},{"title":"Rates","type":0,"sectionRef":"#","url":"/docs/Tutorial-Setup/Rates","content":"","keywords":"","version":"Next"},{"title":"Understanding Actual Rates​","type":1,"pageTitle":"Rates","url":"/docs/Tutorial-Setup/Rates#understanding-actual-rates","content":"“Actual Rates” are the default rates in Rotorflight, providing a straightforward approach to setting maximum rotational velocity (e.g., entering 1000 corresponds to 1000deg/sec) and center sensitivity values. There are 3 values in Actual Rates: Center Sensitivity, Max Rate, Expo.  ","version":"Next","tagName":"h2"},{"title":"Center Sensitivity​","type":1,"pageTitle":"Rates","url":"/docs/Tutorial-Setup/Rates#center-sensitivity","content":"Center Sensitivity relates to the responsiveness around the center stick position. A lower value offers finer, smoother control, while a higher value results in a more reactive heli to stick movement. ","version":"Next","tagName":"h3"},{"title":"Max Rate​","type":1,"pageTitle":"Rates","url":"/docs/Tutorial-Setup/Rates#max-rate","content":"Max Rate defines the heli's rotation speed at full stick deflection. The value entered represents the exact maximum rotational velocity. For example, entering 300 means your heli will attempt to rotate at 300 degrees/sec at full stick. However, keep in mind that the maximum angular velocity can be limited by your heli mechanics. When the heli reaches its physical limitation and cannot flip any faster, the maximum angular velocity is capped, regardless of the higher value set in Rotorflight. ","version":"Next","tagName":"h3"},{"title":"Expo​","type":1,"pageTitle":"Rates","url":"/docs/Tutorial-Setup/Rates#expo","content":"Expo flattens the curve between center stick and full stick. To achieve a more linear rate, keep Expo low. For a broader center stick region with finer control, increase Expo. Keep in mind that increasing Expo also reduces center sensitivity. While Expo can be as high as 1.0, excessive Expo might cause decreased center stick sensitivity and make the heli’s response more unpredictable towards full stick (more jumpy). ","version":"Next","tagName":"h3"},{"title":"Understanding Raceflight Rates​","type":1,"pageTitle":"Rates","url":"/docs/Tutorial-Setup/Rates#understanding-raceflight-rates","content":"Actual Rates can be a little bit tricky for someone that does not have Betaflight knowledge and experience. So if you are coming from a different FBL system then Raceflight Rates might make more sense for you. There are 3 values in Raceflight Rates: Rate, Acro+, Expo.  ","version":"Next","tagName":"h2"},{"title":"Rate​","type":1,"pageTitle":"Rates","url":"/docs/Tutorial-Setup/Rates#rate","content":"Rate defines the heli's rotation speed at full stick deflection. The value entered represents the exact maximum rotational velocity. For example, entering 300 means your heli will attempt to rotate at 300 degrees/sec at full stick. ","version":"Next","tagName":"h3"},{"title":"Acro+​","type":1,"pageTitle":"Rates","url":"/docs/Tutorial-Setup/Rates#acro","content":"For the sake of simplicity, always keep Acro+ at 0. ","version":"Next","tagName":"h3"},{"title":"Expo​","type":1,"pageTitle":"Rates","url":"/docs/Tutorial-Setup/Rates#expo-1","content":"Expo flattens the curve between center stick and full stick. To achieve a more linear rate, keep Expo low. For a broader center stick region with finer control, increase Expo. While Expo can be as high as 100, excessive Expo might cause decreased center stick sensitivity and make the heli’s response more unpredictable towards full stick (more jumpy). ","version":"Next","tagName":"h3"},{"title":"Rates Smoothness​","type":1,"pageTitle":"Rates","url":"/docs/Tutorial-Setup/Rates#rates-smoothness","content":"During piroflips, one may feel that the cyclic has slight wobbles. Increasing Rates Smoothness would help with that given the PID loop is tuned well. ","version":"Next","tagName":"h3"},{"title":"Copy Rate Profile​","type":1,"pageTitle":"Rates","url":"/docs/Tutorial-Setup/Rates#copy-rate-profile","content":"You can use the Copy rateprofile button at the upper right corner to copy the values of the current profile to another one. ","version":"Next","tagName":"h2"},{"title":"Remapping","type":0,"sectionRef":"#","url":"/docs/Tutorial-Setup/Remapping","content":"","keywords":"","version":"Next"},{"title":"Key concepts​","type":1,"pageTitle":"Remapping","url":"/docs/Tutorial-Setup/Remapping#key-concepts","content":"Before you start remapping your drone FC to be used with Rotorflight, keep in mind the following. 1- Although it is not necessary, but it is advised to keep your cyclic servos on the same Timer. 2- If you wish to use a narrow band tail servo, then assign that servo to separate timer. 3- Main motor esc output should on a separate timer. 4- In case you are using a PWM controlled esc then Rotorflight will require an rpm signal for governor and RPM Filtering, RPM input should be on a 32bit separate timer (TIM2 or TIM5).   ","version":"Next","tagName":"h2"},{"title":"Custom defaults remapping spreadsheet​","type":1,"pageTitle":"Remapping","url":"/docs/Tutorial-Setup/Remapping#custom-defaults-remapping-spreadsheet","content":"Spreadsheet for remapping Betaflight targets for use with Rotorflight. The spreadsheet re-allocates features for motors and servos and configures associated timers and dma. Please 'make a copy'. Rotorflight remapping spreadsheet v1.4.1 ","version":"Next","tagName":"h2"},{"title":"Rotorflight Hardware config and remapping video​","type":1,"pageTitle":"Remapping","url":"/docs/Tutorial-Setup/Remapping#rotorflight-hardware-config-and-remapping-video","content":" ","version":"Next","tagName":"h2"},{"title":"Importing new targets​","type":1,"pageTitle":"Remapping","url":"/docs/Tutorial-Setup/Remapping#importing-new-targets","content":"Some targets in the betaflight target repository have additional #define lines above board_name. Please do not chose them. In the example below copy only from board_name down. The Board_name MUST be the first line in the spreadsheet.  ","version":"Next","tagName":"h2"},{"title":"Old Versions​","type":1,"pageTitle":"Remapping","url":"/docs/Tutorial-Setup/Remapping#old-versions","content":"Rotorflight remapping spreadsheet v1.3 Rotorflight remapping spreadsheet v1.2 Rotorflight remapping spreadsheet v1.1 ","version":"Next","tagName":"h2"},{"title":"RPM Filters","type":0,"sectionRef":"#","url":"/docs/Tutorial-Setup/RPM-Filters","content":"RPM Filters RPM filters clean up the gyro signals by filtering out vibrations that are coming from the rotating parts in a helicopter: the main rotor, tail rotor and motor(s). The difference between an unfiltered and filtered signal is significant. Here's an example of filtered and unfiltered gyro signals: RPM filtered gyro signals enable you to tune the helicopter better, for example by being able to use higher gains. The RPM filters require real time motor speed information to be available to the flight controller. This can be obtained with a Frequency Sensor or by using Bidirectional DSHOT. Once the FC knows the motor speed, it can calculate the main and tail rotor speeds. For this it needs to know the Main Rotor Gear Ratio and the Tail Rotor Gear Ratio, which you can specify in the Motors tab. For example, here are the ratios for my Gaui X3. note Direct drive motors have a ratio of 1:1. In order to use RPM filters, enable the feature RPM_FILTER in the Configuration tab. Next, enable the Gyro RPM Notch Filters in the Gyro tab. These settings should be ok for a first flight. Filters introduce latency. More filters mean more latency. So try to keep the number of filters low. Double filters provide heavier filtering than single filters, but are also slower. They are sometimes needed on the 1st and/or 2nd harmonic. tip The Q factor defines how wide the filter is: Lower Q values make the filter widerHigher Q values make the filter smaller Wider filters are slower than narrow filters, so try to make the filters as small as possible without it being ineffective. Filter tuning Make a blackbox log of a short flight with constant headspeed. Scroll to the point where the heli has spooled up and is hovering. Mark that point with the I key. Scroll near the end and mark that with the O key. Now bring up the Analyzer Display and enlarge it. It might look like: This log was made with only a double fundamental filter. As you can see there's some noise around 144Hz. Since the headspeed is 4200 RPM, that must be near the second harmonic (4200/60 = 70*2 = 140Hz). Also note that the gyro signal in the background is also a bit noisy. Now let's add some single filters for the 2nd (140Hz) and 3rd (210Hz) harmonic. Suddenly the log looks a lot cleaner:","keywords":"","version":"Next"},{"title":"Receiver","type":0,"sectionRef":"#","url":"/docs/Tutorial-Setup/Receiver","content":"","keywords":"","version":"Next"},{"title":"Receiver Configuration​","type":1,"pageTitle":"Receiver","url":"/docs/Tutorial-Setup/Receiver#receiver-configuration","content":"First activate Serial Rx on the UART you have connected your receiver.  ","version":"Next","tagName":"h2"},{"title":"Receiver Type​","type":1,"pageTitle":"Receiver","url":"/docs/Tutorial-Setup/Receiver#receiver-type","content":"There are many receiver protocols supported in Rotorflight, SBUS in the one of the most known receiver protocols, however it is not telemetry capable. On the Other hand FrSky F.Port and ELRS are the most used protocols because they support telemetry and thus allow you to use the Rotorflight LUA app to perform tuning using you radio. SBUS needs to be connected to an RX pad.  SBUS with S.Port: the SBUS pin needs to be connected to a free UART RX, and the S.Port pin needs to be connected to a free UART TX (of another free UART), and you activate Telemetry: FrSky SmartPort on that UART.  F.Port needs be connected to a TX pad, with Inverted Serial Signaling activated ,and Half-Duplex activated.  CRSF/ELRS needs an RX and a TX on the same UART.   note The Inverted Serial Signaling option will work only on F7/H7 type mcu, if you are using an F4 mcu, then you need to use and external signal inverter, or hack your receiver to get an Un-Inverted signal for SBUS, S.Port, and F.Port. for more info check Uninverted SBUS and Smart Port on Frsky Receivers Please see the documentation for your FC for more details on how to connect your receiver.  ","version":"Next","tagName":"h2"},{"title":"Receiver Channels​","type":1,"pageTitle":"Receiver","url":"/docs/Tutorial-Setup/Receiver#receiver-channels","content":"Select the corresponding channels order based on the selected receiver type.  For FrSky receivers, set the channels in your radio as per the below order.  For ELRS receivers, set the channels in your radio as per the below order. note For CRSF/ELRS always set ARM switch to CH5 on the radio, also set THR to CH6  Revert channels on your transmitter if a channels responds the wrong way around.  ","version":"Next","tagName":"h2"},{"title":"Receiver Settings​","type":1,"pageTitle":"Receiver","url":"/docs/Tutorial-Setup/Receiver#receiver-settings","content":" Adjust Stick Center as required by your radio to achieve 0% when the ROLL, PITCH, YAW sticks are centered. Adjust Stick Maximum Travel achieve 100% at the sticks limits.Adjust Throttle Channel value for 0% throttle to achieve 0% on the channel bar.Adjust Throttle Channel value for 100% throttle to achieve 100% on the channel bar. NOTE! Throttle hold must send a value than is lower than 0% level, for example you can set you radio to send 1000us at 0% throttle, and 975us at throttle hold. Adjust Cyclic Deadband and Yaw Deadband to the smallest possible value that doesn't make your model drift in the Rates Preview window. note Do not use trim for Roll, Pitch or Yaw on your transmitter. You should end up with something similar to this:  ","version":"Next","tagName":"h2"},{"title":"Telemetry Sensors​","type":1,"pageTitle":"Receiver","url":"/docs/Tutorial-Setup/Receiver#telemetry-sensors","content":"Use the below switches to enable/disable the telemetry sensors from the telemetry stream sent to your radio.  caution Calibrating Stability Mode The stability modes (Angle, Horizon or Rescue) can be calibrated so that the heli doesn't drift much when using such a mode. This can only be done via the accelerometer trims.Do not use trim on your transmitter. ","version":"Next","tagName":"h2"},{"title":"RPM Measurement","type":0,"sectionRef":"#","url":"/docs/Tutorial-Setup/Rpm-Measurement","content":"","keywords":"","version":"Next"},{"title":"Frequency Sensor​","type":1,"pageTitle":"RPM Measurement","url":"/docs/Tutorial-Setup/Rpm-Measurement#frequency-sensor","content":"Typically it is used when the RPM is not available via ESC telemetry. Only BLHeli_32, some BLHeli_S and APD F3 ESCs support Dshot/KISS telemetry, so this feature is needed with a wide range of traditional ESCs. The RPM signal is used in multiple places in the FC, e.g. in the PID control, the governor and the RPM-filter. If these features are not needed, then there is no need for the frequency sensor either. An electrical frequency signal is provided by some ESCs, e.g. Hobbywing with the &quot;yellow&quot; wire. Or it can come from an RPM sensor, which is converting the motor three-phase voltages into a frequency signal - e.g. Hobbywing RPM sensor. Please refer to your ESC's or sensor's manuals how to connect them correctly. Note about the Hobbywing RPM sensor: it's safest to power it with 3.3V, as the input voltage of the sensor is also the output voltage of the RPM signal it generates. All inputs on a STM32 MCU tolerate 3.3V, and some will also accept 5V. But if you're using a 8.4V BEC to power the sensor, you'll likely damage the MCU. Up to two frequency sensors are supported, for acquiring motor #1 and motor #2 speed. If both Frequency Sensor and telemetry RPM signals are available, the Frequency Sensor has precedence. ","version":"Next","tagName":"h2"},{"title":"Configuration​","type":1,"pageTitle":"RPM Measurement","url":"/docs/Tutorial-Setup/Rpm-Measurement#configuration","content":"First, a pin must be configured for frequency sensor use. The pin must be connected to a timer with exclusive access. In other words, there must be a free timer, not used by anything else, and one of its positive channels must be available on a pin that is connected to the FC's solder pads. Negative channels, like CH3N, can't be used as inputs. Once we know which timer and pin we can use, it can be configured for frequency sensor use. This can be done via the Custom defaults remapping spreadsheet or by reading through the STM32 manual for your processor. note We recommend that Freq inputs are allocated to pins that have Timer 2 or Timer 5 available. If 2 Freq inputs are required (e.g. Motorized tail) then both inputs can share the same timer. In the remapping spreadsheet these pins are indicated by the green box marked Freq. In this example, we have chosen to use the LED_STRIP pin as our frequency input. We see there is only one option (Timer1) on AF1. We can use this pin but must not allocate any of the Servos or Motors to Timer1. Only the motor pins share this timer so we can choose either AF2 (timer3) or AF3 (timer8).  ","version":"Next","tagName":"h3"},{"title":"The lines which configure the frequency signal​","type":1,"pageTitle":"RPM Measurement","url":"/docs/Tutorial-Setup/Rpm-Measurement#the-lines-which-configure-the-frequency-signal","content":"resource LED_STRIP 1 NONE resource Freq 1 A09 timer A09 AF1 # Freq - pin A09: TIM1 CH2 (AF1) dma pin A09 0 # Freq - 0: DMA2 Stream 6 Channel 0  Then the frequency sensor can be turned ON with the feature flag located on the Configuration tab.  ","version":"Next","tagName":"h3"},{"title":"Bidirectional DSHOT​","type":1,"pageTitle":"RPM Measurement","url":"/docs/Tutorial-Setup/Rpm-Measurement#bidirectional-dshot","content":"Several features of Rotorflight require telemetry data for the motor speed such as the Govenor and RPM Filtering. One method for the FC to get this motor speed is via Bidirectional DSHOT. Bidirectional DSHOT is an ESC protocol which enables communications in both directions between the FC and the ESC. The speed command can be sent by the FC to the ESC and the ESC responds by sending the current motor eRPM (electrical RPM). From the Motors tab in Rotorflight Configurator select an DSHOT ESC protocol (DSHOT150-DSHOT600) and enable Bidirectional DSHOT. This requires ESC firmware that supports Bidirectional DSHOT. ","version":"Next","tagName":"h2"},{"title":"Supported ESC Firmware​","type":1,"pageTitle":"RPM Measurement","url":"/docs/Tutorial-Setup/Rpm-Measurement#supported-esc-firmware","content":"BLHeli_32​ Bidirectional DSHOT is fully supported from firmware version 32.7.0 onward. ESCs with earlier firmware will have to be updated before speed telemetry will operate. BLHeli_S​ BLHeli_S ESCs do not support Bidirectional DSHOT. In order to access this functionality with a BLheli_S ESC, alternative firmware must be flashed. There are currently 3 options for this. 1. Bluejay​ Bluejay is an open source firmware for BLheli_S ESCs which supports Bidirectional DSHOT, see BlueJay. This firmware has been used successfully for several Rotorflight builds. Bluejay is capable of flashing individual settings to each ESC (tail and main) which is important when using an all in one (AIO) board. Bluejay v0.15 and later also supports disabling damped light (regenerative breaking), a must if your helicopter doesn't have a one way bearing. For example, a K110 will yaw/spin rapidly on throttle hold if damped light is enabled. See Flashing Bluejay for details. 2. BLheli_M​ BLheli_M is developed by JazzMaverick. It supports Bidirectional DSHOT, but you can't disable damped light mode and it does not have the ability to download individual config to each ESC. JazzMaverick on GitHub 3. JESC​ Jesc is a paid firmware version for BLheli_S ESCs which supports Bidirectional DSHOT. JESC. ","version":"Next","tagName":"h3"},{"title":"More information​","type":1,"pageTitle":"RPM Measurement","url":"/docs/Tutorial-Setup/Rpm-Measurement#more-information","content":"More details on Bidirectional DSHOT and RPM filtering at betaflight. ","version":"Next","tagName":"h2"},{"title":"CLI Profile (Bank) switching","type":0,"sectionRef":"#","url":"/docs/Tutorial-Walkthroughs/CLI-Profile-switching-example","content":"CLI Profile (Bank) switching Until the Adjustments tab has been re-implemented in RF2, you can use the below command to switch profiles using an Aux channel in your radio. The CLI command format is: adjfunc &lt;index&gt; &lt;func&gt; &lt;enable channel&gt; &lt;start&gt; &lt;end&gt; &lt;value channel&gt; &lt;dec start&gt; &lt;dec end&gt; &lt;inc start&gt; &lt;inc end&gt; &lt;step size&gt; &lt;value min&gt; &lt;value max&gt; For a simple three profile switching using a three position Aux Channel use the below command. adjfunc [index] [function] [n] 900 2100 [n] 975 2025 975 2025 0 0 3 Where: index: this is the adjustment index, it should be unique for each adjustment command.function: function number, use 1 for Rate Profile, 2 for PID Profile.n: Aux channel number -1, for Aux2 use 1, for Aux3 use 2. Use the below example to switch between three PID Profiles using Aux2. adjfunc 0 2 1 900 2100 1 975 2025 975 2025 0 0 3 Also you can use the below example to switch between three Rate Profiles using Aux2. adjfunc 1 1 1 900 2100 1 975 2025 975 2025 0 0 3 Rotorflight 2 CLI Changes For more info regarding the changes that have been made to RF2 CLI Commands, please visit Rotorflight 2 CLI Changes","keywords":"","version":"Next"},{"title":"Profile (Bank) switching example","type":0,"sectionRef":"#","url":"/docs/Tutorial-Walkthroughs/Profile-switching-example","content":"","keywords":"","version":"Next"},{"title":"Purpose​","type":1,"pageTitle":"Profile (Bank) switching example","url":"/docs/Tutorial-Walkthroughs/Profile-switching-example#purpose","content":"info We often configure several flight modes to suit our own flying requirements e.g. (Futaba - Normal, IU1, IU2)(OpenTx - FM1, FM2, FM3). It is quite possible that with each of these flight modes we would want to adjust and tune the model independently. We can do this through the Adjustments tab. This is a similar feature to V-bar 'Bank switching'. The following example is just a suggestion and is one way to go about using the adjustments tab. The same process can be used to switch rates if required. ","version":"Next","tagName":"h2"},{"title":"Aim​","type":1,"pageTitle":"Profile (Bank) switching example","url":"/docs/Tutorial-Walkthroughs/Profile-switching-example#aim","content":"My helicopter has already been set up to have a 3 position switch (SwE) which selects between 3 headspeeds (I use the governor so my 'curves' are just flat). The following example will add switching of tuning parameters (Profile Tab) for each of these headspeeds. ","version":"Next","tagName":"h2"},{"title":"Configure the Tx​","type":1,"pageTitle":"Profile (Bank) switching example","url":"/docs/Tutorial-Walkthroughs/Profile-switching-example#configure-the-tx","content":"We need to assign a spare channel to your 3 position switch (SwE) (can be any channel or switch). NOTE This example shows the process for EdgeTx (same for OpenTX) but is really the same process for any transmitter. Step 1: Assign Ch9 to the SwE in the Mixers tab  ","version":"Next","tagName":"h3"},{"title":"Configure flight controller​","type":1,"pageTitle":"Profile (Bank) switching example","url":"/docs/Tutorial-Walkthroughs/Profile-switching-example#configure-flight-controller","content":"Step 2: looking at the channels in the receiver tab we can see that Aux4 is the ninth channel. This matches our TX assignment from step 1. Confirm the 3 position switch changes the value seen on Aux4,  Step 3: note The Adjustments tab is not implemented yet in RF2. However you can still perform profile switching using CLI Profile Switching Method on the following page. ","version":"Next","tagName":"h3"},{"title":"Servos","type":0,"sectionRef":"#","url":"/docs/Tutorial-Setup/Servos","content":"","keywords":"","version":"Next"},{"title":"Servo Numbering​","type":1,"pageTitle":"Servos","url":"/docs/Tutorial-Setup/Servos#servo-numbering","content":"","version":"Next","tagName":"h2"},{"title":"Direct​","type":1,"pageTitle":"Servos","url":"/docs/Tutorial-Setup/Servos#direct","content":"For helicopters that uses mechanical mixing, where the Pitch, Roll, and Collective movements are each controlled by a dedicated servo by means of a complex series of linkages and levers from the servos up to the swashplate. Servo 1 - Pitch Servo 2 - Roll Servo 3 - Collective Servo 4 - Rudder ","version":"Next","tagName":"h3"},{"title":"CCPM​","type":1,"pageTitle":"Servos","url":"/docs/Tutorial-Setup/Servos#ccpm","content":"For 120, 135 and 140 deg CCPM swashplates. Looking from the tail towards the nose of the helicopter: Servo 1 - Pitch (inline with the centerline of the helicopter) Servo 2 - Left side Servo 3 - Right side Servo 4 - Rudder   ","version":"Next","tagName":"h3"},{"title":"Fixed pitch​","type":1,"pageTitle":"Servos","url":"/docs/Tutorial-Setup/Servos#fixed-pitch","content":"90deg L​ Servo 1 - Pitch (inline with the centerline of the helicopter) Servo 2 - Side servo Servo 3 - Rudder  90deg V​ Servo 1 - Left side Servo 2 - Right side Servo 3 - Rudder  ","version":"Next","tagName":"h3"},{"title":"Servo Override​","type":1,"pageTitle":"Servos","url":"/docs/Tutorial-Setup/Servos#servo-override","content":"The toggle at the bottom of this page enables the servo overrides. The purpose of this is so that each servo can be driven by the slider to calibrate the range and center points. Beside each servo is an individual override. The servo override slider scale is in degrees  ","version":"Next","tagName":"h2"},{"title":"Servo Configuration parameters​","type":1,"pageTitle":"Servos","url":"/docs/Tutorial-Setup/Servos#servo-configuration-parameters","content":" ","version":"Next","tagName":"h2"},{"title":"Center​","type":1,"pageTitle":"Servos","url":"/docs/Tutorial-Setup/Servos#center","content":"In general this will be 1500us for cyclic servos and 760us ","version":"Next","tagName":"h3"},{"title":"Min and Max​","type":1,"pageTitle":"Servos","url":"/docs/Tutorial-Setup/Servos#min-and-max","content":"These are hard limits to prevent servos binding or moving outside of their mechanical limits. If a servo is commanded to a point that is greater or less than it is capable it will buzz and likely burn out. These settings should be used to limit the command. ","version":"Next","tagName":"h3"},{"title":"Scale Neg and Scale Pos​","type":1,"pageTitle":"Servos","url":"/docs/Tutorial-Setup/Servos#scale-neg-and-scale-pos","content":"Scales the negative and positive direction of the servo to match the commanded angle. ","version":"Next","tagName":"h3"},{"title":"Rate​","type":1,"pageTitle":"Servos","url":"/docs/Tutorial-Setup/Servos#rate","content":"This is the servo frequency. This will be specified by the manufacturer. A large proportion of servos suitable for cyclic operate at 333Hz. For Rotorflight 2 it is recommended that tail servos are assigned to a different timer than cyclic servos (see Remapping). This means that tail servos can be set to a different frequency (i.e. faster) ","version":"Next","tagName":"h3"},{"title":"Speed​","type":1,"pageTitle":"Servos","url":"/docs/Tutorial-Setup/Servos#speed","content":"Servo Speed Equalization. The aim of this parameter is to remove the collective &quot;bobbing&quot; when fast elevator changes are applied. The bobbing happens because the elevator servo has to move double distance vs. the aileron servos, when elevator position is changed. If the change is faster than the servos can go, the aileron servos will reach the target sooner than the elevator servo, causing the swash to jump slightly in the process. To tune this value increase the speed value (it's actually ms/60deg, like in the datasheet) until the bobbing is not visible any more. It should be always ok to use the value from the datasheet if unsure. ","version":"Next","tagName":"h3"},{"title":"Reverse​","type":1,"pageTitle":"Servos","url":"/docs/Tutorial-Setup/Servos#reverse","content":"Toggle for forward or reverse servo direction ","version":"Next","tagName":"h3"},{"title":"Geo Cor​","type":1,"pageTitle":"Servos","url":"/docs/Tutorial-Setup/Servos#geo-cor","content":"Geometry Correction. Servos are rotary, so at high angles this results in smaller swashplate movement for each degree of servo movement. Geometry correction accounts for this and provides better control at high angles (e.g. 3D flight). In order to use this feature it is important to set the servo arm at 90deg (with servo center) and calibrating the servo scale. ","version":"Next","tagName":"h3"},{"title":"Servo Setup and Calibration​","type":1,"pageTitle":"Servos","url":"/docs/Tutorial-Setup/Servos#servo-setup-and-calibration","content":"","version":"Next","tagName":"h2"},{"title":"Step 1​","type":1,"pageTitle":"Servos","url":"/docs/Tutorial-Setup/Servos#step-1","content":"DO NOT CONNECT THE SERVOS YET!Confirm and set the servo center to your servo manufacturers recommendation. For Cyclic this will usually be 1500 or 1520us, and for tail it would be 750 or 760us.If a servo's center is 760us, make sure to change the min/max and pos/neg scales to 250 instead of 500.Confirm and set the servo rate as specified by your manufacturer. For many digital cyclic servos this is 333Hz and for most tail servos this is 560Hz ","version":"Next","tagName":"h3"},{"title":"Step 2​","type":1,"pageTitle":"Servos","url":"/docs/Tutorial-Setup/Servos#step-2","content":"Connect the servosSet Servo override to onFit servo arms to as close to 90 degrees as possible.Slide Servo 1 override in the positive direction (i.e. right)confirm the servo arm travels up towards the swashplate. If not toggle the servo reverse. Repeat with remaining cyclic servos. ","version":"Next","tagName":"h3"},{"title":"Step 3​","type":1,"pageTitle":"Servos","url":"/docs/Tutorial-Setup/Servos#step-3","content":"Set each of the override sliders to 0 degreesSet center to level the servo arm. One quick way is to slide the override bar and copy the output value from the blue bar into the center and press save. Make sure to reset the override to see the correct effect. Repeat with remaining cyclic servos. ","version":"Next","tagName":"h3"},{"title":"Step 4 (Usually Optional)​","type":1,"pageTitle":"Servos","url":"/docs/Tutorial-Setup/Servos#step-4-usually-optional","content":"Calibrate the range. Not all servos move by the same angle for each change in command. This step calibrates this range so that the servo's move by the same amount. This means that the Geometric Correction can be used. Set the override to a positive value (e.g. 30deg)measure the current servo arm angle and increase or decrease the Scale Pos until the servo arm angle matches the override angle.  ","version":"Next","tagName":"h3"},{"title":"Tuning using Adjustments","type":0,"sectionRef":"#","url":"/docs/Tutorial-Walkthroughs/Tuning-using-Adjustments","content":"Tuning using Adjustments note The Adjustments tab is not implemented yet in RF2. the page will be updated once it is implemented again. You can still setup adjustment functions using CLI commands.","keywords":"","version":"Next"},{"title":"Using Stability Modes","type":0,"sectionRef":"#","url":"/docs/Tutorial-Walkthroughs/Using-StabilityModes","content":"","keywords":"","version":"Next"},{"title":"Purpose​","type":1,"pageTitle":"Using Stability Modes","url":"/docs/Tutorial-Walkthroughs/Using-StabilityModes#purpose","content":"info 6G modes provide self stabilization/leveling of the helicopter when the sticks are moved to the centre. This is the opposite to the standard Acro mode (used for aerobatics and 3D) which will not self level after sticks are centered and thus is inherently unstable. These modes are generally used for beginners or those wanting more of a drone feel to their helicopter. 6G modes do not provide position fixing as found with GPS systems so the heli will drift around in the wind. ","version":"Next","tagName":"h2"},{"title":"Aim​","type":1,"pageTitle":"Using Stability Modes","url":"/docs/Tutorial-Walkthroughs/Using-StabilityModes#aim","content":"In this example we will configure a 3 position switch (SwC) to select between Stability modes. With the SwC fully down we will have Acro mode, SwC in the centre will be Horizon Mode and in the fully up position we will enable Angle mode. ","version":"Next","tagName":"h2"},{"title":"Configure the Tx​","type":1,"pageTitle":"Using Stability Modes","url":"/docs/Tutorial-Walkthroughs/Using-StabilityModes#configure-the-tx","content":"We need to assign a spare channel to your 3 position switch (SwC) (can be any channel or switch). NOTE This example shows the process for EdgeTx (same for OpenTX) but is really the same process for any transmitter. Step 1: Assign Ch8 to the SwC in the Mixers tab  ","version":"Next","tagName":"h3"},{"title":"Configure flight controller​","type":1,"pageTitle":"Using Stability Modes","url":"/docs/Tutorial-Walkthroughs/Using-StabilityModes#configure-flight-controller","content":"Step 2: looking at the channels in the receiver tab we can see that Aux3 is the eight channel. This matches our TX assignment from step 1. Confirm the 3 position switch changes the value seen on Aux3,  Step 3: Go to the Modes tab. Disable hide unused modes if nothing is visible.Chose the Horizon Mode. Enter AUX3 in the channel and adjust the range to cover the middle section of the control channel as shown in the picture below. Chose the Angle Mode. Enter Aux3 in the channel and adjust the range to cover the top section of the control range as shown in the pic below.  Step 4: Test and confirm the switch position enables and disables modes as required These values are added to the Profile so will result in (e.g. SwC down = No mode active = Acro, SwC middle = Horizon Mode, SwC up = Angle Mode).  ","version":"Next","tagName":"h3"},{"title":"Calibrating stability modes​","type":1,"pageTitle":"Using Stability Modes","url":"/docs/Tutorial-Walkthroughs/Using-StabilityModes#calibrating-stability-modes","content":"## Warning ## - do not use your transmitter trims!!​ Your Roll, Pitch and Yaw should all be trimmed to 1500 at centre stick always Stability modes will try to stabilize to the calibrated flight controller level. This is rarely perfectly aligned with the actual helicopters attitude where there is no drift (least drift... there will always be some due to wind etc). In order to calibrate this in-flight we have 2 methods: Stick controls (needs more work)Using the &quot;Rotorflight Lua Scripts](Lua-Scripts)&quot; ## FIXME Note that it's also possible to adjust accelerometer trim values in the Configuration tab of the Configurator, though it's not recommended to do this in-flight. Calibration using Lua Scripts​ Select Accelerometer Trims from the Rotorflight main menu. Test fly the heli tail-in in either Angle or Horizon mode, with sticks at centre. If the heli drifts left, increase roll trim. If it drifts backwards, increase pitch trim. Each time you make a change to the trims long press the wheel/roller. The Page menu should now pop up. Select Save page. Adjust trims until the heli flies hands off without any pronounced drift in any direction.  ","version":"Next","tagName":"h3"}],"options":{"id":"default"}}